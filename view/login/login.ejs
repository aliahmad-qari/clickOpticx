<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Login</title>
  <link rel="stylesheet" href="../../vendors/feather/feather.css">
  <link rel="stylesheet" href="../../vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="../../vendors/css/vendor.bundle.base.css">
  <link rel="stylesheet" href="../../css/vertical-layout-light/style.css">
  <link rel="shortcut icon" href="../../images/favicon.png" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    /* Video Background Styling */
    .video-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 0;
    }

    .content-wrapper {
      position: relative;
      z-index: 1;
    }

    /* Improved form styling */
    .auth-form-light {
      background-color: rgba(255, 255, 255, 0.2) !important;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 20px;
      padding: 30px 40px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
    }

    /* Text and icon visibility */
    .auth-form-light,
    .auth-form-light h2,
    .auth-form-light p,
    .auth-form-light a {
      color: white !important;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }

    /* Input field styling */
    .form-control,
    .form-control:focus,
    .form-control:-webkit-autofill {
      color: white !important;
      background-color: rgba(255, 255, 255, 0.2) !important;
      -webkit-text-fill-color: white !important;
    }

    /* Autofill fix for Chrome, Edge, Safari */
    input.form-control:-webkit-autofill,
    input.form-control:-webkit-autofill:focus,
    input.form-control:-webkit-autofill:hover,
    input.form-control:-webkit-autofill:active {
      -webkit-box-shadow: 0 0 0 100px rgba(255, 255, 255, 0.2) inset !important;
      box-shadow: 0 0 0 100px rgba(255, 255, 255, 0.2) inset !important;
      -webkit-text-fill-color: white !important;
      color: white !important;
      background-color: rgba(255, 255, 255, 0.2) !important;
      transition: background-color 5000s ease-in-out 0s !important;
    }

    .form-control::placeholder {
      color: rgba(255, 255, 255, 0.7) !important;
    }

    /* Input group icons */
    .input-group-text {
      background-color: rgba(255, 255, 255, 0.3) !important;
      border-color: rgba(255, 255, 255, 0.3) !important;
    }

    /* Logo styling */
    .brand-logo img {
      max-width: 200px;
      filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.5));
    }

    .email-input {
      width: 100%;
      max-width: 400px;
      padding: 12px 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .email-input:focus {
      border-color: #4a90e2;
      box-shadow: 0 0 8px rgba(74, 144, 226, 0.3);
    }

    .email-input::placeholder {
      color: #999;
    }

    .fa-eye-slash {
      color: black;
    }

    .alert .btn-close {
      padding: 0 !important;
      margin-left: 1rem !important;
      float: none;
      position: static;
      display: flex;
      align-items: center;
    }

    /* Professional Modal Animations */
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      33% { transform: translateY(-10px) rotate(1deg); }
      66% { transform: translateY(-5px) rotate(-1deg); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.8; }
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Modal backdrop enhancement */
    .modal-backdrop {
      backdrop-filter: blur(5px);
      background-color: rgba(0, 0, 0, 0.6) !important;
    }

    /* Professional form input focus effects */
    .form-control:focus {
      border-color: #667eea !important;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1) !important;
      background-color: white !important;
    }

    /* Smooth transitions for all interactive elements */
    .modal-content {
      animation: fadeInScale 0.4s ease-out;
    }

    /* Custom scrollbar for modal */
    .modal-body::-webkit-scrollbar {
      width: 6px;
    }

    .modal-body::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .modal-body::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 10px;
    }

    .modal-body::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #5a67d8, #6b46c1);
    }
  </style>
</head>

<body>

  <div class="">
    <!-- sss --> <!-- sss --> <!-- sss --> <!-- sss -->
    <% if (typeof errorMessage !== 'undefined' && errorMessage) { %>
  <div style="position:fixed;top:20px;right:20px;z-index:2000;max-width:400px;">
    <div id="register-message-box" class="alert alert-danger alert-dismissible fade show d-flex align-items-center justify-content-between" role="alert" style="color: rgb(155, 11, 11); padding: 0.75rem 1rem;">
      <div class="d-flex align-items-center flex-grow-1">
        <span><strong>Error:</strong> <%= errorMessage %></span>
      </div>
      <button type="button" class="btn-close ms-3" data-bs-dismiss="alert" aria-label="Close" style="padding:0;margin-left:1rem;"></button>
    </div>
  </div>
  <% } %>

    <% if (typeof message !== 'undefined' && message) { %>
      <div class="position-relative" style="z-index: 1055;">
        <div class="d-flex justify-content-end position-absolute w-100" style="top: 10px; right: 0; z-index: 1055;">
          <div id="pusher-success-box" class="alert alert-success alert-dismissible fade show mt-3" role="alert"
            style="color: white;">
            <%= message %>
          </div>
        </div>
      </div>
    <% } %>

    <script>
      window.addEventListener('DOMContentLoaded', () => {
        const msgBox = document.getElementById('pusher-message-box');
        if (msgBox) {
          setTimeout(() => {
            msgBox.classList.remove('show');
            msgBox.classList.add('fade');
            setTimeout(() => msgBox.style.display = "none", 500);
          }, 4000);
        }
        const successBox = document.getElementById('pusher-success-box');
        if (successBox) {
          setTimeout(() => {
            successBox.classList.remove('show');
            successBox.classList.add('fade');
            setTimeout(() => successBox.style.display = "none", 500);
          }, 4000);
        }
      });
    </script>

    <!-- Show forgot password modal if requested -->
    <% if (typeof showForgotModal !== 'undefined' && showForgotModal) { %>
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          var forgotModal = new bootstrap.Modal(document.getElementById('forgotPasswordModal'));
          forgotModal.show();
        });
      </script>
    <% } %>

    <video autoplay loop muted class="video-bg">
      <source src="/images/1234.mp4" type="video/mp4">
    </video>
    <div class="overlay"></div>

    <div class="container-scroller">

      <div class="container-fluid page-body-wrapper full-page-wrapper">
        <div class="content-wrapper d-flex align-items-center auth px-0">
          <div class="row w-100 mx-0">
            <div class="col-lg-4 mx-auto">
              <div
                class="auth-form-light text-white px-4 px-sm-5 d-flex flex-column align-items-center text-center">
                <!-- Logo Section -->
                <div class="brand-logo mb-3">
                  <% if (bg_result && bg_result[0] && bg_result[0].nav_imgs) { %>
                    <img src="/images/ClickTake.png" alt="Company Logo" class="mt-3">
                    <% } else { %>
                      <div class="logo-placeholder d-flex align-items-center justify-content-center"
                        style="width:150px;height:80px;background:rgba(255,255,255,0.2);border-radius:10px;">
                        <span class="text-white fw-bold">LOGO</span>
                      </div>
                      <% } %>
                </div>

                <!-- Rest of your form remains the same -->
                <header class="mb-4">
                  <h2 class="h4">Sign in to continue</h2>
                  <p class="text-muted">Hello! Let's get started</p>
                </header>

                <form action="/login" method="post" class="pt-3 w-100" style="max-width: 400px;">
                  <!-- Email Field -->
                  <div class="form-group position-relative mb-3">
                    <label for="loginEmail" class="visually-hidden"></label>
                    <div class="input-group">
                      <span class="input-group-text">
                        <i class="bi bi-envelope-fill text-white"></i>
                      </span>
                      <input type="email" class="form-control form-control-lg" id="loginEmail" name="Email"
                        placeholder="Email address" required autocomplete="username">
                    </div>
                  </div>

                  <!-- Password Field -->
                  <div class="form-group position-relative mb-3">
                    <div class="input-group position-relative">
                      <span class="input-group-text">
                        <i class="bi bi-lock-fill text-white"></i>
                      </span>
                      <input type="password" class="form-control form-control-lg pe-5" id="loginPassword"
                        name="password" placeholder="Password" required autocomplete="current-password"
                        style="z-index: 1;">
                      <button type="button"
                        class="btn btn-link text-black position-absolute end-0 top-50 translate-middle-y me-2"
                        id="togglePassword" aria-label="Show password" style="z-index: 2;">
                        <i class="fas fa-eye-slash"></i>
                      </button>
                    </div>
                  </div>
                  <!-- Forgot Password Link -->
                  <div class="d-flex justify-content-end mb-3">
                    <a href="#" class="text-white text-decoration-underline" data-bs-toggle="modal"
                      data-bs-target="#forgotPasswordModal" aria-label="Forgot password">
                      Forgot Password?
                    </a>
                  </div>

                  <!-- Submit Button -->
                  <div class="d-grid mb-3">
                    <button type="submit" class="btn btn-primary btn-lg py-3 fw-medium"
                      style="border-radius: 23px; background-color: #4B49AC;">
                      Sign In
                    </button>
                  </div>
                  <!-- Registration Link -->
                  <div class="text-center mt-4">
                    <p class="mb-0">Don't have an account?</p>
                    <a href="/register" class="text-white text-decoration-underline fw-medium">Create account</a>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Professional Forgot Password Modal -->
    <div class="modal fade" id="forgotPasswordModal" tabindex="-1" aria-labelledby="forgotPasswordModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" style="border: none; border-radius: 25px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);">
          
          <!-- Modal Header with Modern Design -->
          <div class="modal-header" style="border: none; padding: 30px 40px 20px 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 25px 25px 0 0; position: relative; overflow: hidden;">
            <div class="w-100 text-center">
              <div class="position-relative">
                <div style="position: absolute; top: -20px; left: -20px; width: 100px; height: 100px; background: rgba(255, 255, 255, 0.1); border-radius: 50%; animation: float 6s ease-in-out infinite;"></div>
                <div style="position: absolute; top: 10px; right: -30px; width: 60px; height: 60px; background: rgba(255, 255, 255, 0.05); border-radius: 50%; animation: float 8s ease-in-out infinite reverse;"></div>
                
                <div class="mb-3" style="position: relative; z-index: 2;">
                  <div style="display: inline-block; padding: 20px; background: rgba(255, 255, 255, 0.15); border-radius: 50%; backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.2);">
                    <i class="fas fa-key" style="font-size: 2.5rem; color: white; animation: pulse 2s infinite;"></i>
                  </div>
                </div>
                
                <h4 class="modal-title text-white fw-bold mb-2" id="forgotPasswordModalLabel" style="font-size: 1.8rem; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">
                  Reset Your Password
                </h4>
                <p class="text-white-50 mb-0" style="font-size: 1rem; opacity: 0.9;">
                  We'll help you get back into your account
                </p>
              </div>
            </div>
            
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" 
                    style="position: absolute; top: 20px; right: 20px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; padding: 10px; backdrop-filter: blur(10px);"></button>
          </div>

          <!-- Modal Body with Enhanced Styling -->
          <div class="modal-body" style="padding: 40px;">
            
            <!-- Status Messages -->
            <% if (typeof errorMessage !== 'undefined' && errorMessage) { %>
              <div class="alert alert-danger mb-4" role="alert" style="border: none; border-radius: 15px; background: linear-gradient(135deg, #ff6b6b, #ee5a52); color: white; border-left: 5px solid #ff4757; animation: slideInUp 0.5s ease;">
                <div class="d-flex align-items-center">
                  <i class="fas fa-exclamation-triangle me-3" style="font-size: 1.2rem;"></i>
                  <div>
                    <strong>Error!</strong><br>
                    <%= errorMessage %>
                  </div>
                </div>
              </div>
            <% } %>

            <!-- Instructions Section -->
            <div class="text-center mb-4">
              <div class="row">
                <div class="col-12">
                  <div style="background: linear-gradient(135deg, #f1f3f4, #e8eaf6); padding: 30px; border-radius: 20px; border: 1px solid rgba(103, 126, 234, 0.1); position: relative; overflow: hidden;">
                    <div style="position: absolute; top: -10px; right: -10px; width: 40px; height: 40px; background: linear-gradient(45deg, #667eea, #764ba2); border-radius: 50%; opacity: 0.1;"></div>
                    <div style="position: absolute; bottom: -15px; left: -15px; width: 60px; height: 60px; background: linear-gradient(45deg, #764ba2, #667eea); border-radius: 50%; opacity: 0.05;"></div>
                    
                    <div class="mb-3">
                      <i class="fas fa-envelope-open-text" style="font-size: 2.5rem; color: #667eea; margin-bottom: 15px;"></i>
                    </div>
                    <h5 style="color: #2d3748; font-weight: 600; margin-bottom: 15px;">Password Recovery Process</h5>
                    <p class="text-muted mb-0" style="line-height: 1.6;">
                      Enter your registered email address below and we'll send you a secure verification code to reset your password. 
                      <strong>Check your inbox and spam folder</strong> for the recovery email.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Form Section -->
            <form id="forgotPasswordForm" action="/forgot-password" method="POST" novalidate>
              <div class="mb-4">
                <label for="emailInput" class="form-label fw-semibold text-dark mb-3" style="font-size: 1rem;">
                  <i class="fas fa-envelope me-2 text-primary"></i>Email Address
                </label>
                <div class="position-relative">
                  <input type="email" 
                         class="form-control form-control-lg" 
                         id="emailInput" 
                         name="email"
                         placeholder="Enter your registered email address" 
                         required 
                         autocomplete="email"
                         style="border: 2px solid #e2e8f0; border-radius: 15px; padding: 15px 20px 15px 50px; font-size: 1rem; transition: all 0.3s ease; background: #f8f9fa;"
                         onkeyup="validateEmail(this)"
                         onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 3px rgba(102, 126, 234, 0.1)'; this.style.background='white';"
                         onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'; this.style.background='#f8f9fa';" />
                  
                  <div style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: #9ca3af;">
                    <i class="fas fa-envelope"></i>
                  </div>
                  
                  <div id="email-validation" class="position-absolute" style="right: 15px; top: 50%; transform: translateY(-50%); opacity: 0; transition: opacity 0.3s ease;">
                    <i class="fas fa-check-circle text-success"></i>
                  </div>
                </div>
                <div id="email-error" class="text-danger mt-2" style="font-size: 0.875rem; display: none;">
                  <i class="fas fa-exclamation-circle me-1"></i>Please enter a valid email address
                </div>
              </div>

              <!-- Submit Button -->
              <div class="d-grid mb-4">
                <button type="submit" 
                        class="btn btn-lg py-3 fw-semibold position-relative"
                        id="submitBtn"
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                               border: none; 
                               border-radius: 15px; 
                               color: white; 
                               font-size: 1.1rem; 
                               transition: all 0.3s ease; 
                               box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);"
                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 35px rgba(102, 126, 234, 0.4)';"
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(102, 126, 234, 0.3)';">
                  
                  <span id="btn-text">
                    <i class="fas fa-paper-plane me-2"></i>Send Recovery Code
                  </span>
                  
                  <span id="btn-loading" class="d-none">
                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    Sending...
                  </span>
                </button>
              </div>
            </form>

            <!-- Security Notice -->
            <div class="text-center">
              <div style="background: rgba(34, 197, 94, 0.1); padding: 20px; border-radius: 15px; border-left: 4px solid #22c55e;">
                <div class="d-flex justify-content-center align-items-center mb-2">
                  <i class="fas fa-shield-alt text-success me-2"></i>
                  <small class="text-success fw-semibold">Secure & Encrypted</small>
                </div>
                <p class="text-muted small mb-0" style="line-height: 1.5;">
                  Your recovery request is protected by industry-standard encryption. 
                  The reset link will expire in <strong>15 minutes</strong> for your security.
                </p>
              </div>
            </div>
          </div>

          <!-- Modal Footer -->
          <div class="modal-footer justify-content-center" style="border: none; padding: 20px 40px 40px 40px; background: transparent;">
            <div class="text-center">
              <p class="text-muted mb-2" style="font-size: 0.9rem;">
                <i class="fas fa-clock me-1"></i>
                Didn't receive the email? Check your spam folder or 
                <a href="#" class="text-primary fw-semibold text-decoration-none" onclick="resendEmail()" style="border-bottom: 1px solid transparent; transition: border-color 0.3s ease;" onmouseover="this.style.borderColor='#667eea';" onmouseout="this.style.borderColor='transparent';">
                  try again
                </a>
              </p>
              <div class="d-flex justify-content-center align-items-center">
                <small class="text-muted">
                  <i class="fas fa-question-circle me-1"></i>
                  Need help? <a href="#" class="text-primary">Contact Support</a>
                </small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('loginPassword');

        togglePassword.addEventListener('click', function () {
          const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
          passwordInput.setAttribute('type', type);
          this.querySelector('i').classList.toggle('fa-eye');
          this.querySelector('i').classList.toggle('fa-eye-slash');
        });
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const errorDiv = document.getElementById("forgot-error");
        if (errorDiv) {
          const forgotModal = new bootstrap.Modal(document.getElementById('forgotPasswordModal'));
          forgotModal.show();
        }
      });
    </script>

    <!-- Professional Modal JavaScript Functions -->
    <script>
      // Email validation function
      function validateEmail(input) {
        const email = input.value;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const validation = document.getElementById('email-validation');
        const errorDiv = document.getElementById('email-error');
        
        if (email.length > 0) {
          if (emailRegex.test(email)) {
            // Valid email
            input.style.borderColor = '#22c55e';
            validation.style.opacity = '1';
            errorDiv.style.display = 'none';
            validation.innerHTML = '<i class="fas fa-check-circle text-success"></i>';
          } else {
            // Invalid email
            input.style.borderColor = '#ef4444';
            validation.style.opacity = '1';
            errorDiv.style.display = 'block';
            validation.innerHTML = '<i class="fas fa-times-circle text-danger"></i>';
          }
        } else {
          // Empty email
          input.style.borderColor = '#e2e8f0';
          validation.style.opacity = '0';
          errorDiv.style.display = 'none';
        }
      }

      // Form submission with loading state
      document.getElementById('forgotPasswordForm').addEventListener('submit', function(e) {
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btn-text');
        const btnLoading = document.getElementById('btn-loading');
        const emailInput = document.getElementById('emailInput');
        
        // Validate email before submission
        if (!emailInput.value || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
          e.preventDefault();
          emailInput.focus();
          validateEmail(emailInput);
          
          // Show error with animation
          const errorDiv = document.getElementById('email-error');
          errorDiv.style.display = 'block';
          errorDiv.style.animation = 'slideInUp 0.3s ease';
          return false;
        }
        
        // Show loading state
        btnText.classList.add('d-none');
        btnLoading.classList.remove('d-none');
        submitBtn.disabled = true;
        
        // Add visual feedback
        submitBtn.style.background = 'linear-gradient(135deg, #9ca3af, #6b7280)';
        submitBtn.style.cursor = 'not-allowed';
        
        // Let form submit naturally
        // The server will handle the response
      });

      // Resend email function
      function resendEmail() {
        const emailInput = document.getElementById('emailInput');
        if (emailInput.value && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
          // Trigger form submission
          document.getElementById('forgotPasswordForm').submit();
          
          // Show feedback
          showToast('Resending recovery email...', 'info');
        } else {
          emailInput.focus();
          showToast('Please enter a valid email address first', 'error');
        }
      }

      // Toast notification function
      function showToast(message, type = 'info') {
        // Remove existing toasts
        const existingToasts = document.querySelectorAll('.toast-notification');
        existingToasts.forEach(toast => toast.remove());
        
        const toastColors = {
          success: { bg: '#22c55e', icon: 'check-circle' },
          error: { bg: '#ef4444', icon: 'exclamation-circle' },
          info: { bg: '#3b82f6', icon: 'info-circle' }
        };
        
        const color = toastColors[type] || toastColors.info;
        
        const toast = document.createElement('div');
        toast.className = 'toast-notification';
        toast.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: ${color.bg};
          color: white;
          padding: 15px 20px;
          border-radius: 10px;
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
          z-index: 9999;
          font-weight: 500;
          animation: slideInUp 0.3s ease;
          max-width: 400px;
        `;
        
        toast.innerHTML = `
          <div class="d-flex align-items-center">
            <i class="fas fa-${color.icon} me-2"></i>
            <span>${message}</span>
          </div>
        `;
        
        document.body.appendChild(toast);
        
        // Auto remove after 4 seconds
        setTimeout(() => {
          toast.style.animation = 'slideOutUp 0.3s ease';
          setTimeout(() => toast.remove(), 300);
        }, 4000);
      }

      // Add slideOutUp animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes slideOutUp {
          from {
            opacity: 1;
            transform: translateY(0);
          }
          to {
            opacity: 0;
            transform: translateY(-30px);
          }
        }
      `;
      document.head.appendChild(style);

      // Auto-focus email input when modal opens
      document.getElementById('forgotPasswordModal').addEventListener('shown.bs.modal', function () {
        document.getElementById('emailInput').focus();
      });

      // Reset form when modal closes
      document.getElementById('forgotPasswordModal').addEventListener('hidden.bs.modal', function () {
        const form = document.getElementById('forgotPasswordForm');
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btn-text');
        const btnLoading = document.getElementById('btn-loading');
        
        // Reset form
        form.reset();
        
        // Reset button state
        btnText.classList.remove('d-none');
        btnLoading.classList.add('d-none');
        submitBtn.disabled = false;
        submitBtn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
        submitBtn.style.cursor = 'pointer';
        
        // Reset validation states
        document.getElementById('email-validation').style.opacity = '0';
        document.getElementById('email-error').style.display = 'none';
        document.getElementById('emailInput').style.borderColor = '#e2e8f0';
      });
    </script>

    <script src="../../vendors/js/vendor.bundle.base.js"></script>
    <script src="../../js/off-canvas.js"></script>
    <script src="../../js/hoverable-collapse.js"></script>
    <script src="../../js/template.js"></script>
    <script src="../../js/settings.js"></script>
    <script src="../../js/todolist.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>