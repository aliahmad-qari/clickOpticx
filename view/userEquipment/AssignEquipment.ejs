<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Assign Equipment</title>
    <link rel="stylesheet" href="/vendors/feather/feather.css">
    <link rel="stylesheet" href="/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/vendors/datatables.net-bs4/dataTables.bootstrap4.css">
    <link rel="stylesheet" type="text/css" href="/js/select.dataTables.min.css">
    <link rel="stylesheet" href="/css/vertical-layout-light/style.css">
    <link rel="shortcut icon" href="/images/favicon.png" />
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.2.96/css/materialdesignicons.min.css" rel="stylesheet">
    <style>
  :root {
    --primary: #6c5ce7;
    --primary-light: #a29bfe;
    --secondary: #00cec9;
    --success: #198754;
    --success-light: #198754;
    --warning: #fdcb6e;
    --danger: #d63031;
    --dark: #2d3436;
    --light: #f5f6fa;
    --gray: #dfe6e9;
    --card-bg: rgba(255, 255, 255, 0.9);
    --glass-effect: rgba(255, 255, 255, 0.15);
  }

  body {
    background: #f5f6fa;
    color: var(--dark);
  }

  .container-fluid.page-body-wrapper {
    display: flex;
    flex-direction: row;
  }

  .main-panel {
    flex-grow: 1;
    padding: 10px;
    transition: margin-left 0.3s ease;
  }

  @media (max-width: 991px) {
    .main-panel {
      margin-left: 0;
    }
  }

  .card {
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
    border: none;
    overflow: hidden;
    margin-bottom: 30px;
  }

  .card-header {
    background: linear-gradient(90deg, var(--primary), var(--primary-light));
    color: white;
    padding: 20px 25px;
    font-size: 1.4rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .card-body {
    padding: 25px;
  }

  .toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 10px;
    padding: 0 11px;
  }

  .search-box {
    position: relative;
    flex: 1;
    min-width: 250px;
    max-width: 400px;
  }

  .search-box i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #9e9e9e;
  }

  .search-input {
    width: 100%;
    padding: 12px 15px 12px 45px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    background-color: #f9f9f9;
  }

  .search-input:focus {
    outline: none;
    border-color: #1a73e8;
    background-color: white;
    box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
  }

  .filter-options {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .form-select {
    padding: 10px 15px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    font-size: 0.95rem;
    background-color: #f9f9f9;
    cursor: pointer;
  }

  .btn-add {
    background: #4b49ac;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    font-size: 0.95rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(26, 115, 232, 0.2);
  }

  .btn-add:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(26, 115, 232, 0.3);
  }

  .table-responsive {
    overflow-x: auto;
    border-radius: 10px;
    background: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }

  .equipment-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    min-width: 800px;
  }

  .equipment-table th {
    background-color: #f5f8ff;
    color: #1a73e8;
    font-weight: 600;
    padding: 16px 20px;
    text-align: left;
    border-bottom: 1px solid #e0e0e0;
    white-space: nowrap;
  }

  .equipment-table td {
    padding: 14px 20px;
    border-bottom: 1px solid #f0f0f0;
    vertical-align: middle;
  }

  .equipment-table tr:hover {
    background-color: #f9fbff;
  }

  .equipment-image {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    object-fit: cover;
  }

  .category-badge {
    display: inline-block;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    background-color: #e8f0fe;
    color: #1a73e8;
    font-weight: 500;
  }

  .quantity-display {
    position: relative;
    width: 80px;
  }

  .quantity-value {
    position: relative;
    z-index: 2;
    font-weight: 500;
  }

  .quantity-bar {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    background-color: rgba(66, 133, 244, 0.1);
    border-radius: 4px;
    z-index: 1;
    transition: width 0.5s ease;
  }

  .status-badge {
    display: inline-flex;
    align-items: center;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    white-space: nowrap;
  }

  .status-badge i {
    margin-right: 5px;
    font-size: 0.9rem;
  }

  .in-stock {
    background-color: rgba(52, 168, 83, 0.1);
    color: #34a853;
  }

  .action-buttons {
    display: flex;
    gap: 8px;
  }

  .btn-action {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background-color: transparent;
    color: #5f6368;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .btn-action:hover {
    background-color: #f1f3f4;
    color: #1a73e8;
  }

  .btn-action.edit:hover {
    background-color: #fff8e1;
    color: #f9ab00;
  }

  /* Modal Styling */
  .modal {
    z-index: 1055;
  }

  .modal-backdrop {
    z-index: 1050;
    background-color: rgba(0, 0, 0, 0.5);
  }

  .modal-backdrop.show {
    opacity: 0.5;
  }

  .form-card {
    background: var(--card-bg);
    border-radius: 20px;
    padding: 10px 17px;
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    animation: slideUp 0.8s ease forwards;
    max-width: 700px;
    margin: 0 auto;
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(50px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .form-header {
    background: linear-gradient(90deg, var(--primary), var(--primary-light));
    color: white;
    padding: 12px;
    border-radius: 15px;
    text-align: center;
    margin-bottom: 30px;
    font-size: 23px;
    font-weight: 600;
    position: relative;
    overflow: hidden;
  }

  .form-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    animation: shine 2s infinite;
  }

  @keyframes shine {
    0% {
      left: -100%;
    }
    100% {
      left: 100%;
    }
  }

  .form-group {
    position: relative;
    margin-bottom: 30px;
  }

  .form-control,
  .form-select {
    width: 100%;
    border: none;
    border-bottom: 2px solid var(--gray);
    background: transparent;
    padding: 12px 0;
    font-size: 1rem;
    color: var(--dark);
    transition: all 0.3s ease;
  }

  .form-control:focus,
  .form-select:focus {
    border-bottom-color: var(--primary);
    outline: none;
  }

  .form-label {
    position: absolute;
    top: 12px;
    left: 0;
    font-weight: 500;
    color: black;
    pointer-events: none;
    transition: all 0.3s ease;
  }

  .form-control:focus~.form-label,
  .form-control:not(:placeholder-shown)~.form-label,
  .form-select:focus~.form-label,
  .form-select:not([value=""])~.form-label {
    top: -20px;
    left: 0;
    font-size: 0.85rem;
    color: var(--primary);
  }

  .form-control:focus~.form-label::after,
  .form-control:not(:placeholder-shown)~.form-label::after,
  .form-select:focus~.form-label::after,
  .form-select:not([value=""])~.form-label::after {
    content: '*';
    color: var(--danger);
    margin-left: 5px;
  }

  .form-select option {
    background: var(--light);
    color: var(--dark);
  }

  .btn-success {
    background: linear-gradient(90deg, var(--success), var(--success-light));
    border: none;
    padding: 15px;
    border-radius: 50px;
    font-weight: 600;
    color: white;
    width: 100%;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .btn-success:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(108, 92, 231, 0.3);
  }

  .btn-success::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    animation: shine 2s infinite;
  }

  .error-message {
    color: var(--danger);
    font-size: 0.85rem;
    margin-top: 5px;
    display: none;
  }

  .input-error .error-message {
    display: block;
  }

  .input-error .form-control,
  .input-error .form-select {
    border-bottom-color: var(--danger);
  }

  .form-icon {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gray);
    transition: color 0.3s ease;
  }

  .form-control:focus~.form-icon,
  .form-select:focus~.form-icon {
    color: var(--primary);
  }
  /* ss */
   /* Table Footer */
   .table-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 20px;
      padding: 15px 10px;
      font-size: 0.9rem;
      color: #5f6368;
    }

    .showing-entries {
      color: #5f6368;
    }

    .pagination {
      display: flex;
      gap: 5px;
    }

    .page-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #e0e0e0;
      background-color: white;
      color: #5f6368;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
    }

    .page-btn:hover {
      background-color: #f1f3f4;
    }

    .page-btn.active {
      background-color: #1a73e8;
      color: white;
      border-color: #1a73e8;
    }

    .page-btn.disabled {
      opacity: 0.5;
      cursor: not-allowed;
      pointer-events: none;
    }
    @media (max-width: 330px) {
  .btn-add {
    padding: 10px 15px;
    font-size: 13px;
  }
  .btn-add i {
    font-size: 12px;
  }
}
@media (max-width: 307px) {
  .btn-add {
    padding: 12px 10px;
    font-size: 13px;
  }
  .btn-add i {
    font-size: 12px;
  }
}
@media (max-width: 300px) {
  .btn-add {
        padding: 11px 14px;
        font-size: 11px;
        gap: 2px;
    }

 
}
</style>
</head>

<body>
    <div class="container-scroller">
        <%- include ('../partials/_navbar.ejs') %>
            <div class="container-fluid page-body-wrapper">
                <%- include ('../partials/SettingsDow.ejs') %>
                <%- include ('../partials/Sidebar.ejs') %>
                    <div class="main-panel">
                        <div class="content-wrapper">
                          
                               
                                    <!-- Success Modal -->
                                    <div class="modal fade" id="successModal" tabindex="-1" role="dialog"
                                        aria-labelledby="successModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="successModalLabel">Success</h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true" style="color: rgb(3, 3, 3); font-size: 25px;">×</span>

                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <i class="bi bi-check-circle"></i>
                                                    <p>Equipment updated successfully!</p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-primary"
                                                        onclick="window.location.href='/userEquipment'">OK</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Error Modal -->
                                    <div class="modal fade" id="errorModal" tabindex="-1" role="dialog"
                                        aria-labelledby="errorModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="errorModalLabel">Error</h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true"  style="color: rgb(3, 3, 3); font-size: 25px;">×</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <i class="bi bi-exclamation-triangle"></i>
                                                    <p>
                                                        <%= messages.error || 'An error occurred.' %>
                                                    </p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-danger"
                                                        data-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <% if (messages.success) { %>
                                        <script>
                                            window.addEventListener('DOMContentLoaded', () => {
                                                $('#successModal').modal('show');
                                            });
                                        </script>
                                        <% } %>
                                            <% if (messages.error) { %>
                                                <script>
                                                    window.addEventListener('DOMContentLoaded', () => {
                                                        $('#errorModal').modal('show');
                                                    });
                                                </script>
                                                <% } %>
                                                    <script>
                                                        window.addEventListener('DOMContentLoaded', () => {
                                                            // Form validation
                                                            document.querySelectorAll('form').forEach(form => {
                                                                form.addEventListener('submit', (e) => {
                                                                    const cableQuantity = form.querySelector('[name="cable_quantity"]');
                                                                    if (cableQuantity && cableQuantity.value && !cableQuantity.value.match(/^\d+\s*core\s*\d+\s*meter$/)) {
                                                                        e.preventDefault();
                                                                        $('#errorModal').find('.modal-body p').text('Cable quantity must be in the format "X core Y meter"');
                                                                        $('#errorModal').modal('show');
                                                                        return;
                                                                    }
                                                                    const cat6Quantity = form.querySelector('[name="cat6_quantity"]');
                                                                    if (cat6Quantity && cat6Quantity.value && !cat6Quantity.value.match(/^\d+\s*meter$/)) {
                                                                        e.preventDefault();
                                                                        $('#errorModal').find('.modal-body p').text('Cat 6 quantity must be in the format "X meter"');
                                                                        $('#errorModal').modal('show');
                                                                        return;
                                                                    }
                                                                    const clipsQuantity = form.querySelector('[name="clips_quantity"]');
                                                                    if (clipsQuantity && clipsQuantity.value && !clipsQuantity.value.match(/^\d+\s*clips$/)) {
                                                                        e.preventDefault();
                                                                        $('#errorModal').find('.modal-body p').text('Clips quantity must be in the format "X clips"');
                                                                        $('#errorModal').modal('show');
                                                                        return;
                                                                    }
                                                                    const quantityFields = ['duck_patti_quantity', 'patch_card_quantity'];
                                                                    for (const field of quantityFields) {
                                                                        const input = form.querySelector(`[name="${field}"]`);
                                                                        if (input && input.value && !input.value.match(/^\d+$/)) {
                                                                            e.preventDefault();
                                                                            $('#errorModal').find('.modal-body p').text(`${field.replace('_', ' ')} must be a number`);
                                                                            $('#errorModal').modal('show');
                                                                            return;
                                                                        }
                                                                    }
                                                                    const newQtyFields = form.querySelectorAll('[name="new_equipment_quantity[]"]');
                                                                    newQtyFields.forEach(input => {
                                                                        if (input.value && !input.value.match(/^\d+\s*(meter|pairs|clips)?$/)) {
                                                                            e.preventDefault();
                                                                            $('#errorModal').find('.modal-body p').text('New equipment quantity must be in the format "X" or "X unit" (e.g., "5", "10 meter", "3 pairs")');
                                                                            $('#errorModal').modal('show');
                                                                            return;
                                                                        }
                                                                    });
                                                                    const existingQtyFields = form.querySelectorAll('[name="existing_equipment_quantity[]"]');
                                                                    existingQtyFields.forEach(input => {
                                                                        if (input.value && !input.value.match(/^\d+\s*(meter|pairs|clips)?$/)) {
                                                                            e.preventDefault();
                                                                            $('#errorModal').find('.modal-body p').text('Existing equipment quantity must be in the format "X" or "X unit" (e.g., "5", "10 meter", "3 pairs")');
                                                                            $('#errorModal').modal('show');
                                                                            return;
                                                                        }
                                                                    });
                                                                    const newPriceFields = form.querySelectorAll('[name$="_price[]"]');
                                                                    newPriceFields.forEach(input => {
                                                                        if (input.value && !input.value.match(/^\d+(\.\d{1,2})?$/)) {
                                                                            e.preventDefault();
                                                                            $('#errorModal').find('.modal-body p').text('Equipment price must be a valid number (e.g., 150, 150.00)');
                                                                            $('#errorModal').modal('show');
                                                                            return;
                                                                        }
                                                                    });
                                                                });
                                                            });

                                                            // Custom input toggling
                                                            document.querySelectorAll('select[data-custom-input]').forEach(select => {
                                                                const customInputId = select.getAttribute('data-custom-input');
                                                                const customInput = document.getElementById(customInputId);
                                                                select.addEventListener('change', () => {
                                                                    customInput.style.display = select.value === 'Other' ? 'block' : 'none';
                                                                    if (select.value !== 'Other') {
                                                                        customInput.value = '';
                                                                    }
                                                                });
                                                                customInput.style.display = select.value === 'Other' ? 'block' : 'none';
                                                            });

                                                            // Add new equipment row
                                                            document.querySelectorAll('.add-equipment-btn').forEach(btn => {
                                                                btn.addEventListener('click', () => {
                                                                    const container = btn.previousElementSibling;
                                                                    const row = document.createElement('div');
                                                                    row.className = 'new-equipment-row';
                                                                    row.innerHTML = `
                                                <div class="form-group">
                                                    <input type="text" name="new_equipment_name[]" class="form-control" placeholder="Equipment Name">
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" name="new_equipment_quantity[]" class="form-control" placeholder="Quantity (e.g., 5, 10 meter)">
                                                </div>
                                                <div class="form-group">
                                                    <select name="new_equipment_unit[]" class="form-control">
                                                        <option value="">None</option>
                                                        <option value="meter">Meter</option>
                                                        <option value="pairs">Pairs</option>
                                                        <option value="clips">Clips</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <input type="text" name="new_equipment_price[]" class="form-control" placeholder="Price (e.g., 150.00)">
                                                </div>
                                            `;
                                                                    container.appendChild(row);
                                                                });
                                                            });

                                                            // Search and Pagination
                                                            function setupTableControls(tableId, type) {
                                                                const table = document.getElementById(tableId);
                                                                const tbody = table.querySelector('tbody');
                                                                const rows = Array.from(tbody.querySelectorAll('tr'));
                                                                const searchEmail = document.getElementById(`${type}-search-email`);
                                                                const searchId = document.getElementById(`${type}-search-id`);
                                                                const entriesSelect = document.getElementById(`${type}-entries`);
                                                                const prevBtn = document.getElementById(`${type}-prev`);
                                                                const nextBtn = document.getElementById(`${type}-next`);
                                                                const pageInfo = document.getElementById(`${type}-page-info`);
                                                                let currentPage = 1;
                                                                let entriesPerPage = parseInt(entriesSelect.value);

                                                                function filterRows() {
                                                                    const emailValue = searchEmail.value.toLowerCase();
                                                                    const idValue = searchId.value.toLowerCase();
                                                                    return rows.filter(row => {
                                                                        const email = row.cells[1].textContent.toLowerCase();
                                                                        const id = row.cells[0].textContent.toLowerCase();
                                                                        return email.includes(emailValue) && id.includes(idValue);
                                                                    });
                                                                }

                                                                function updateTable() {
                                                                    const filteredRows = filterRows();
                                                                    const start = (currentPage - 1) * entriesPerPage;
                                                                    const end = start + entriesPerPage;
                                                                    tbody.innerHTML = '';
                                                                    filteredRows.slice(start, end).forEach(row => tbody.appendChild(row));
                                                                    const totalPages = Math.ceil(filteredRows.length / entriesPerPage);
                                                                    pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
                                                                    prevBtn.disabled = currentPage === 1;
                                                                    nextBtn.disabled = currentPage === totalPages || totalPages === 0;
                                                                }

                                                                searchEmail.addEventListener('input', () => {
                                                                    currentPage = 1;
                                                                    updateTable();
                                                                });

                                                                searchId.addEventListener('input', () => {
                                                                    currentPage = 1;
                                                                    updateTable();
                                                                });

                                                                entriesSelect.addEventListener('change', () => {
                                                                    entriesPerPage = parseInt(entriesSelect.value);
                                                                    currentPage = 1;
                                                                    updateTable();
                                                                });

                                                                prevBtn.addEventListener('click', () => {
                                                                    if (currentPage > 1) {
                                                                        currentPage--;
                                                                        updateTable();
                                                                    }
                                                                });

                                                                nextBtn.addEventListener('click', () => {
                                                                    const filteredRows = filterRows();
                                                                    const totalPages = Math.ceil(filteredRows.length / entriesPerPage);
                                                                    if (currentPage < totalPages) {
                                                                        currentPage++;
                                                                        updateTable();
                                                                    }
                                                                });

                                                                updateTable();
                                                            }

                                                            setupTableControls('fibre-table', 'fibre');
                                                            setupTableControls('wireless-table', 'wireless');
                                                        });
                                                    </script>
                                                    <!-- Fibre Submissions -->
                                                 <div class="container">
    <!-- Tab Buttons -->
    <div class="text-center mb-4">
        <button id="fibre-tab" class="btn btn-primary active">Fibre</button>
        <button id="wireless-tab" class="btn btn-primary">Wireless</button>
    </div>

    <!-- Fibre Section (initially visible) -->
   

    </div>
<div id="fibre-section">
  <div class="main-panel" style="width: 100%;">
    <div class="content-wrapper">
      <div class="card">
        <div class="card-header">
          Fibre User
        </div>
        <div class="toolbar">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="idSearch" placeholder="Search by ID..." class="search-input">
          </div>
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="emailSearch" placeholder="Search by email..." class="search-input">
            <input type="hidden" name="page" value="1">
          </div>
        </div>
        <div class="table-responsive">
          <table class="equipment-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Email</th>
                <% const fibreEquipmentNames=[...new Set(assigned_equipment.filter(a=> a.submission_type === 'fibre').map(a => a.equipment_name))]; %>
                <% fibreEquipmentNames.forEach(name=> { %>
                  <% if (assigned_equipment.some(a=> a.submission_type === 'fibre' && a.equipment_name === name && a.price != null)) { %>
                    <th><%= name %> Price</th>
                  <% } %>
                <% }) %>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <% submissions.forEach((s, i)=> { %>
                <tr data-id="<%= s.id %>">
                  <td><%= i + 1 %></td>
                  <td>
                    <a href="#" class="email-link" data-toggle="modal" data-target="#viewModal<%= s.id %>">
                      <%= s.email %>
                    </a>
                  </td>
                  <% fibreEquipmentNames.forEach(name=> { %>
                    <% const equipment=assigned_equipment.find(a=> a.submission_type === 'fibre' && a.submission_id === s.id && a.equipment_name === name); %>
                    <td><%= equipment ? equipment.quantity : '-' %></td>
                    <% if (assigned_equipment.some(a=> a.submission_type === 'fibre' && a.equipment_name === name && a.price != null)) { %>
                      <td><%= equipment && equipment.price != null ? equipment.price : '-' %></td>
                    <% } %>
                  <% }) %>
                  <td>
                    <button type="button" class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editModal<%= s.id %>">Edit</button>
                    <form action="/delete-fibre/<%= s.id %>" method="POST" style="display:inline;">
                      <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                    </form>
                  </td>
                </tr>
                <!-- View Modal -->
                <div class="modal fade" id="viewModal<%= s.id %>" tabindex="-1" role="dialog" aria-labelledby="viewModalLabel<%= s.id %>" aria-hidden="true">
                  <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="viewModalLabel<%= s.id %>">User Information (ID: <%= s.id %>)</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true" style="color: rgb(3, 3, 3); font-size: 25px;">×</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <div class="row">
                          <div class="col-md-6"><strong>Email:</strong> <%= s.email %></div>
                          <div class="col-md-6"><strong>Device:</strong> <%= s.device_label %></div>
                          <div class="col-md-6"><strong>Device Price:</strong> <%= s.device_price %></div>
                          <div class="col-md-6"><strong>First Package Price:</strong> <%= s.first_package_price %></div>
                          <div class="col-md-6"><strong>Optical Power:</strong> <%= s.fibre_power_label %></div>
                          <div class="col-md-6"><strong>Optical Power Price:</strong> <%= s.fibre_power_price %></div>
                          <div class="col-md-6"><strong>Fibre Color:</strong> <%= s.fibre_color_value %></div>
                          <div class="col-md-6"><strong>Supplying:</strong> <%= s.fibre_supplying_value %></div>
                          <div class="col-md-6"><strong>Fibre Cable:</strong> <%= s.cable_quantity %></div>
                          <div class="col-md-6"><strong>Fibre Cable Price:</strong> <%= s.cable_price %></div>
                          <div class="col-md-6"><strong>Splitter:</strong> <%= s.splitter_value %></div>
                          <div class="col-md-6"><strong>Duck Patti:</strong> <%= s.duck_patti_quantity %></div>
                          <div class="col-md-6"><strong>Duck Patti Price:</strong> <%= s.duck_patti_price %></div>
                          <div class="col-md-6"><strong>Patch Card:</strong> <%= s.patch_card_quantity %></div>
                          <div class="col-md-6"><strong>Patch Card Price:</strong> <%= s.patch_card_price %></div>
                          <% fibreEquipmentNames.forEach(name=> { %>
                            <% const equipment=assigned_equipment.find(a=> a.submission_type === 'fibre' && a.submission_id === s.id && a.equipment_name === name); %>
                            <div class="col-md-6"><strong><%= name %>:</strong> <%= equipment ? equipment.quantity : '-' %></div>
                            <% if (assigned_equipment.some(a=> a.submission_type === 'fibre' && a.equipment_name === name && a.price != null)) { %>
                              <div class="col-md-6"><strong><%= name %> Price:</strong> <%= equipment && equipment.price != null ? equipment.price : '-' %></div>
                            <% } %>
                          <% }) %>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Edit Modal -->
                <div class="modal fade pr-0" id="editModal<%= s.id %>" tabindex="-1" role="dialog" aria-labelledby="editModalLabel<%= s.id %>" aria-hidden="true">
                  <div class="modal-dialog modal-lg" style="max-width:100% !important" role="document">
                    <form action="/update-fibre/<%= s.id %>" method="POST" id="editFibreForm<%= s.id %>">
                      <div class="modal-content" style="background: rgba(255, 255, 255, 0.9); border-radius: 20px; padding: 40px 20px; box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); animation: slideUp 0.8s ease forwards;">
                        <div class="modal-header" style="background: linear-gradient(90deg, #6c5ce7, #a29bfe); color: white; padding: 12px; border-radius: 15px; margin-bottom: 30px; font-size: 23px; font-weight: 600; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: space-between;">
                          <h5 class="modal-title" id="editModalLabel<%= s.id %>" style="margin: 0;"><i class="fas fa-edit" style="margin-right: 8px;"></i>Edit Fibre Submission (ID: <%= s.id %>)</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true" style="color: black; font-size:40px; font-weight: 900;">×</span>
                          </button>
                          <div style="content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); animation: shine 2s infinite;"></div>
                        </div>
                        <div class="modal-body">
                          <!-- First Row -->
                          <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="user_pay" id="user_pay_<%= s.id %>" value="<%= s.user_pay %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="user_pay_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">User Paid</label>
                            </div>
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="company_pay" id="company_pay_<%= s.id %>" value="<%= s.company_pay %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="company_pay_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Company Paid</label>
                            </div>
                          </div>
                          <!-- Second Row -->
                          <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="email" name="email" id="email_<%= s.id %>" value="<%= s.email %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="email_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Email</label>
                            </div>
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="formType" id="formType_<%= s.id %>" value="<%= s.formType || 'fibre' %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="formType_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Form Type</label>
                            </div>
                          </div>
                          <!-- Third Row -->
                          <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="first_package_price" id="first_package_price_<%= s.id %>" value="<%= s.first_package_price %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="first_package_price_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">First Package Price</label>
                            </div>
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <select name="device_label" id="device_label_<%= s.id %>" data-custom-input="custom-device-<%= s.id %>" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                <option value="" disabled>Select Device</option>
                                <option value="X-pon" <%= s.device_label === 'X-pon' ? 'selected' : '' %>>X-pon</option>
                                <option value="E-pon" <%= s.device_label === 'E-pon' ? 'selected' : '' %>>E-pon</option>
                                <option value="G-pon" <%= s.device_label === 'G-pon' ? 'selected' : '' %>>G-pon</option>
                                <option value="tyty" <%= s.device_label === 'tyty' ? 'selected' : '' %>>tyty</option>
                                <option value="Other" <%= !['X-pon', 'E-pon', 'G-pon', 'tyty'].includes(s.device_label) ? 'selected' : '' %>>Other</option>
                              </select>
                              <label for="device_label_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Device Name</label>
                              <input type="text" id="custom-device-<%= s.id %>" name="device_label_custom" placeholder="Enter custom device name" value="<%= !['X-pon', 'E-pon', 'G-pon', 'tyty'].includes(s.device_label) ? s.device_label : '' %>" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease; display: none; margin-top: 8px;">
                            </div>
                          </div>
                          <!-- Fourth Row -->
                          <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="device_price" id="device_price_<%= s.id %>" value="<%= s.device_price %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="device_price_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Device Price</label>
                            </div>
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="fibre_power_label" id="fibre_power_label_<%= s.id %>" value="<%= s.fibre_power_label %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="fibre_power_label_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Fibre Optical Power</label>
                            </div>
                          </div>
                          <!-- Fifth Row -->
                          <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="fibre_power_price" id="fibre_power_price_<%= s.id %>" value="<%= s.fibre_power_price %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="fibre_power_price_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Optical Power Price</label>
                            </div>
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <select name="fibre_color_value" id="fibre_color_value_<%= s.id %>" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                <option value="" disabled>Select Color</option>
                                <option value="Blue" <%= s.fibre_color_value === 'Blue' ? 'selected' : '' %>>Blue</option>
                                <option value="Orange" <%= s.fibre_color_value === 'Orange' ? 'selected' : '' %>>Orange</option>
                                <option value="Green" <%= s.fibre_color_value === 'Green' ? 'selected' : '' %>>Green</option>
                                <option value="Brown" <%= s.fibre_color_value === 'Brown' ? 'selected' : '' %>>Brown</option>
                                <option value="Gray" <%= s.fibre_color_value === 'Gray' ? 'selected' : '' %>>Gray</option>
                                <option value="White" <%= s.fibre_color_value === 'White' ? 'selected' : '' %>>White</option>
                                <option value="Red" <%= s.fibre_color_value === 'Red' ? 'selected' : '' %>>Red</option>
                                <option value="Black" <%= s.fibre_color_value === 'Black' ? 'selected' : '' %>>Black</option>
                                <option value="Yellow" <%= s.fibre_color_value === 'Yellow' ? 'selected' : '' %>>Yellow</option>
                                <option value="Violet" <%= s.fibre_color_value === 'Violet' ? 'selected' : '' %>>Violet</option>
                                <option value="Rose" <%= s.fibre_color_value === 'Rose' ? 'selected' : '' %>>Rose</option>
                                <option value="Aqua" <%= s.fibre_color_value === 'Aqua' ? 'selected' : '' %>>Aqua</option>
                              </select>
                              <label for="fibre_color_value_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Fibre Color</label>
                            </div>
                          </div>
                          <!-- Sixth Row -->
                          <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="fibre_supplying_value" id="fibre_supplying_value_<%= s.id %>" value="<%= s.fibre_supplying_value %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="fibre_supplying_value_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Fibre Supplying</label>
                            </div>
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="cable_quantity" id="cable_quantity_<%= s.id %>" value="<%= s.cable_quantity %>" placeholder="" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="cable_quantity_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Cable (Core + Meter)</label>
                            </div>
                          </div>
                          <!-- Seventh Row -->
                          <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="cable_price" id="cable_price_<%= s.id %>" value="<%= s.cable_price %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="cable_price_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Cable Price</label>
                            </div>
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <select name="splitter_value" id="splitter_value_<%= s.id %>" data-custom-input="custom-splitter-<%= s.id %>" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                <option value="" disabled>Select Splitter</option>
                                <option value="2way" <%= s.splitter_value === '2way' ? 'selected' : '' %>>2 Way</option>
                                <option value="4way" <%= s.splitter_value === '4way' ? 'selected' : '' %>>4 Way</option>
                                <option value="6way" <%= s.splitter_value === '6way' ? 'selected' : '' %>>6 Way</option>
                                <option value="8way" <%= s.splitter_value === '8way' ? 'selected' : '' %>>8 Way</option>
                                <option value="Other" <%= !['2way', '4way', '6way', '8way'].includes(s.splitter_value) ? 'selected' : '' %>>Other</option>
                              </select>
                              <label for="splitter_value_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Splitter</label>
                              <input type="text" id="custom-splitter-<%= s.id %>" name="splitter_value_custom" placeholder="Enter custom splitter" value="<%= !['2way', '4way', '6way', '8way'].includes(s.splitter_value) ? s.splitter_value : '' %>" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease; display: none; margin-top: 8px;">
                            </div>
                          </div>
                          <!-- Eighth Row -->
                          <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="number" name="duck_patti_quantity" id="duck_patti_quantity_<%= s.id %>" value="<%= s.duck_patti_quantity %>" placeholder="" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="duck_patti_quantity_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Duck Patti Quantity</label>
                            </div>
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="duck_patti_price" id="duck_patti_price_<%= s.id %>" value="<%= s.duck_patti_price %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="duck_patti_price_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Duck Patti Price</label>
                            </div>
                          </div>
                          <!-- Ninth Row -->
                          <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="number" name="patch_card_quantity" id="patch_card_quantity_<%= s.id %>" value="<%= s.patch_card_quantity %>" placeholder="" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="patch_card_quantity_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Patch Card Quantity</label>
                            </div>
                            <div style="position: relative; margin-bottom: 30px; width: 100%;">
                              <input type="text" name="patch_card_price" id="patch_card_price_<%= s.id %>" value="<%= s.patch_card_price %>" placeholder=" " style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                              <label for="patch_card_price_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Patch Card Price</label>
                            </div>
                          </div>
                          <!-- Existing Equipment Section -->
                          <div style="margin-bottom: 24px;">
                            <h5 style="color: #6c5ce7; margin-bottom: 20px;">Existing Equipment</h5>
                            <div class="new-equipment-container">
                              <% assigned_equipment.forEach(a=> { %>
                                <% if (a.submission_type === 'fibre' && a.submission_id == s.id) { %>
                                  <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                                    <input type="hidden" name="existing_equipment_id[]" value="<%= a.id %>">
                                    <div style="position: relative; margin-bottom: 30px; width: 100%;">
                                      <input type="text" name="existing_equipment_name[]" value="<%= a.equipment_name %>" class="form-control">
                                      <label>Equipment Name</label>
                                    </div>
                                    <div style="position: relative; margin-bottom: 30px; width: 100%;">
                                      <input type="text" name="existing_equipment_quantity[]" value="<%= a.quantity %>" class="form-control">
                                      <label>Quantity</label>
                                    </div>
                                    <div style="position: relative; margin-bottom: 30px; width: 100%;">
                                      <select name="existing_equipment_unit[]" class="form-control">
                                        <option value="" <%= !a.unit ? 'selected' : '' %>>None</option>
                                        <option value="meter" <%= a.unit === 'meter' ? 'selected' : '' %>>Meter</option>
                                        <option value="pairs" <%= a.unit === 'pairs' ? 'selected' : '' %>>Pairs</option>
                                        <option value="clips" <%= a.unit === 'clips' ? 'selected' : '' %>>Clips</option>
                                      </select>
                                      <label>Unit</label>
                                    </div>
                                    <div style="position: relative; margin-bottom: 30px; width: 100%;">
                                      <input type="text" name="existing_equipment_price[]" value="<%= a.price || '' %>" placeholder="" class="form-control">
                                      <label>Price</label>
                                    </div>
                                  </div>
                                <% } %>
                              <% }) %>
                            </div>
                          </div>
                          <!-- New Equipment Section -->
                          <div style="margin-bottom: 24px;">
                            <h5 style="color: #6c5ce7; margin-bottom: 20px;">Add New Equipment</h5>
                            <div class="new-equipment-container">
                              <div style="display: flex; gap: 24px; margin-bottom: 16px;">
                                <div style="position: relative; margin-bottom: 30px; width: 100%;">
                                  <input type="text" name="new_equipment_name[]" id="new_equipment_name_<%= s.id %>" placeholder="" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                  <label for="new_equipment_name_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Equipment Name</label>
                                </div>
                                <div style="position: relative; margin-bottom: 30px; width: 100%;">
                                  <input type="text" name="new_equipment_quantity[]" id="new_equipment_quantity_<%= s.id %>" placeholder="" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                  <label for="new_equipment_quantity_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Quantity</label>
                                </div>
                                <div style="position: relative; margin-bottom: 30px; width: 100%;">
                                  <select name="new_equipment_unit[]" id="new_equipment_unit_<%= s.id %>" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                    <option value="">None</option>
                                    <option value="meter">Meter</option>
                                    <option value="pairs">Pairs</option>
                                    <option value="clips">Clips</option>
                                  </select>
                                  <label for="new_equipment_unit_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Unit</label>
                                </div>
                                <div style="position: relative; margin-bottom: 30px; width: 100%;">
                                  <input type="text" name="new_equipment_price[]" id="new_equipment_price_<%= s.id %>" placeholder="" style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 12px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                  <label for="new_equipment_price_<%= s.id %>" style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Price</label>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- Submit Button -->
                          <div style="display: flex; flex-wrap: wrap; gap: 24px; justify-content: center;">
                            <button type="submit" style="background: linear-gradient(45deg, #6c5ce7, #a29bfe); border: none; padding: 7px; border-radius: 20px; font-weight: 600; color: white; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; width: 100%; max-width: 200px;">
                              <i class="fas fa-save" style="margin-right: 8px;"></i>Update
                              <div style="content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); animation: shine 0.6s infinite;"></div>
                            </button>
                            <button type="button" data-dismiss="modal" style="background-color: red; border: none; padding: 7px; border-radius: 20px; font-weight: 600; color: white; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; width: 100%; max-width: 200px;">
                              <i class="fas fa-times" style="margin-right: 8px;"></i>Close
                              <div style="content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); animation: shine 0.6s infinite;"></div>
                            </button>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              <% }) %>
            </tbody>
          </table>
        </div>
        <div class="table-footer">
          <div class="showing-entries"></div>
          <div class="pagination">
            <i class="fas fa-chevron-left"></i>
            <i class="fas fa-chevron-right"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  // Existing script for select elements
  document.querySelectorAll('select[data-custom-input]').forEach(select => {
    const customInput = document.getElementById(select.dataset.customInput);
    select.addEventListener('change', () => {
      customInput.style.display = select.value === 'Other' ? 'block' : 'none';
    });
    customInput.style.display = select.value === 'Other' ? 'block' : 'none';
  });

  // Existing script for input and select label handling
  document.querySelectorAll('input, select').forEach(element => {
    const label = element.nextElementSibling;
    if (label && label.tagName === 'LABEL') {
      const updateLabel = () => {
        if (element.value || element.selectedIndex > 0) {
          element.classList.add('active-label');
        } else {
          element.classList.remove('active-label');
        }
      };
      updateLabel();
      element.addEventListener('input', updateLabel);
      element.addEventListener('change', updateLabel);
      element.addEventListener('focus', () => element.classList.add('active-label'));
      element.addEventListener('blur', updateLabel);
    }
  });

  // New script for search functionality
  document.getElementById('idSearch').addEventListener('input', filterTable);
  document.getElementById('emailSearch').addEventListener('input', filterTable);

  function filterTable() {
    const idQuery = document.getElementById('idSearch').value.trim().toLowerCase();
    const emailQuery = document.getElementById('emailSearch').value.trim().toLowerCase();
    const rows = document.querySelectorAll('.equipment-table tbody tr');

    rows.forEach(row => {
      const id = row.dataset.id.toLowerCase();
      const email = row.querySelector('td:nth-child(2) a').textContent.trim().toLowerCase();
      const idMatch = idQuery === '' || id.includes(idQuery);
      const emailMatch = emailQuery === '' || email.includes(emailQuery);
      row.style.display = idMatch && emailMatch ? '' : 'none';
    });
  }
</script>
     <!-- Wireless Section (initially hidden) -->
    <div id="wireless-section" style="display: none;">
       <div class="main-panel" style="width: 100%;">
        <div class="content-wrapper">
          <div class="card">
            <div class="card-header">
              Wireless User
            </div>

          
           <div class="toolbar">
  <div class="search-box" style="display: flex; gap: 10px;">
    <div style="position: relative;">
      <i class="fas fa-search"></i>
      <input type="text" name="search-email" placeholder="Search by email..." class="search-input email-search">
    </div>
    <div style="position: relative;">
      <i class="fas fa-search"></i>
      <input type="hidden" name="search-id" placeholder="Search by ID..." class="search-input id-search">
    </div>
  </div>
</div>
            
          <script>
  document.addEventListener('DOMContentLoaded', function() {
    const emailSearchInput = document.querySelector('.email-search');
    const idSearchInput = document.querySelector('.id-search');
    const tableRows = document.querySelectorAll('.equipment-table tbody tr');

    function filterTable() {
      const emailFilter = emailSearchInput.value.toLowerCase();
      const idFilter = idSearchInput.value.toLowerCase();

      tableRows.forEach(row => {
        const emailCell = row.querySelector('td:nth-child(2) a');
        
        let rowId = '';
        // Extract ID from the data-target attribute of the email link (e.g., 'userInfoModal123')
        const emailLink = row.querySelector('.email-link');
        if (emailLink) {
          const targetId = emailLink.getAttribute('data-target');
          const match = targetId.match(/userInfoModal(\d+)/); // Regex to extract numbers after 'userInfoModal'
          if (match && match[1]) {
            rowId = match[1]; 
          }
        }

        const emailMatches = emailCell ? emailCell.textContent.toLowerCase().includes(emailFilter) : true;
        // Check if rowId includes the idFilter, otherwise check the first cell content as a fallback
        const idMatches = rowId ? rowId.includes(idFilter) : (row.querySelector('td:first-child') ? row.querySelector('td:first-child').textContent.toLowerCase().includes(idFilter) : true);

        if (emailMatches && idMatches) {
          row.style.display = ''; // Show the row
        } else {
          row.style.display = 'none'; // Hide the row
        }
      });
    }

    emailSearchInput.addEventListener('keyup', filterTable);
    idSearchInput.addEventListener('keyup', filterTable);
  });
</script>
        
              <div class="table-responsive">
                <table class="equipment-table">
                <thead>
                <tr>
                <th>#</th>
                <th>Email</th>
                <th>Actions</th>
                </tr>
            </thead>
                                                                <tbody>
                                                                    <% wirelessForms.forEach((w, i)=> { %>
                                                                        <tr>
                                                                            <td>
                                                                                <%= i + 1 %>
                                                                            </td>
                                                                            <td>
                                                                                <a href="#" class="email-link"
                                                                                    data-toggle="modal"
                                                                                    data-target="#userInfoModal<%= w.id %>">
                                                                                    <%= w.email %>
                                                                                </a>
                                                                            </td>
                                                                            <td>
                                                                                <button type="button"
                                                                                    class="btn btn-sm btn-primary"
                                                                                    data-toggle="modal"
                                                                                    data-target="#editWirelessModal<%= w.id %>">Edit</button>
                                                                                <form
                                                                                    action="/delete-wireless/<%= w.id %>"
                                                                                    method="POST"
                                                                                    style="display:inline;">
                                                                                    <button type="submit"
                                                                                        class="btn btn-sm btn-danger">Delete</button>
                                                                                </form>
                                                                            </td>
                                                                        </tr>
                                                                        <!-- User Info Modal -->
                                                                        <div class="modal fade"
                                                                            id="userInfoModal<%= w.id %>" tabindex="-1"
                                                                            role="dialog"
                                                                            aria-labelledby="userInfoModalLabel<%= w.id %>"
                                                                            aria-hidden="true">
                                                                            <div class="modal-dialog modal-lg" style="margin: auto; margin-top:100px;"
    margin-top: 60px;" role="document">
                                                                                <div class="modal-content">
                                                                                    <div class="modal-header">
                                                                                        <h5 class="modal-title"
                                                                                            id="userInfoModalLabel<%= w.id %>">
                                                                                            User Information (ID: <%=
                                                                                                w.id %>)</h5>
                                                                                        <button type="button"
                                                                                            class="close"
                                                                                            data-dismiss="modal"
                                                                                            aria-label="Close">
                                                                                            <span
                                                                                                aria-hidden="true"  style="color: rgb(3, 3, 3); font-size: 25px;">&times;</span>
                                                                                        </button>
                                                                                    </div>
                                                                                    <div class="modal-body">
                                                                                        <div class="row">
                                                                                            <div class="col-md-6">
                                                                                                <strong>Email:</strong>
                                                                                                <%= w.email %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>User
                                                                                                    Paid:</strong>
                                                                                                <%= w.user_pay %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Company
                                                                                                    Paid:</strong>
                                                                                                <%= w.company_pay %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Cat 6
                                                                                                    Quantity:</strong>
                                                                                                <%= w.cat6_quantity %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Cat 6
                                                                                                    Price:</strong>
                                                                                                <%= w.cat6_price %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>First Package
                                                                                                    Price:</strong>
                                                                                                <%= w.first_package_price
                                                                                                    %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Clips
                                                                                                    Quantity:</strong>
                                                                                                <%= w.clips_quantity %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Clips
                                                                                                    Price:</strong>
                                                                                                <%= w.clips_price %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Raval Bold
                                                                                                    Pair:</strong>
                                                                                                <%= w.raval_bold_pair %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Raval Bold
                                                                                                    Price:</strong>
                                                                                                <%= w.raval_bold_price
                                                                                                    %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Poll
                                                                                                    Height:</strong>
                                                                                                <%= w.poll_height %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Poll
                                                                                                    Price:</strong>
                                                                                                <%= w.poll_price %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Signal
                                                                                                    Strength:</strong>
                                                                                                <%= w.signal_strength %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Home Tower
                                                                                                    Height:</strong>
                                                                                                <%= w.home_tower_height
                                                                                                    %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Signal
                                                                                                    Receiver:</strong>
                                                                                                <%= w.signal_receiver %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Receiver
                                                                                                    Price:</strong>
                                                                                                <%= w.receiver_price %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Receiver
                                                                                                    Model:</strong>
                                                                                                <%= w.receiver_model %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>WiFi
                                                                                                    ONU:</strong>
                                                                                                <%= w.wifi_onu %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>ONU
                                                                                                    Price:</strong>
                                                                                                <%= w.onu_price %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>ONU
                                                                                                    Model:</strong>
                                                                                                <%= w.onu_model %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Tower AP
                                                                                                    Device:</strong>
                                                                                                <%= w.tower_ap_device %>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <strong>Wireless
                                                                                                    Field:</strong>
                                                                                                <%= w.wireless_field %>
                                                                                            </div>
                                                                                            <%
                                                                                                wirelessForms.forEach(name=>
                                                                                                { %>
                                                                                                <% const
                                                                                                    equipment=assigned_equipment.find(a=>
                                                                                                    a.submission_type
                                                                                                    === 'wireless' &&
                                                                                                    a.submission_id ===
                                                                                                    w.id &&
                                                                                                    a.equipment_name ===
                                                                                                    name); %>
                                                                                                    <div
                                                                                                        class="col-md-6">
                                                                                                        <strong>
                                                                                                            <%= name %>:
                                                                                                        </strong>
                                                                                                        <%= equipment ?
                                                                                                            equipment.quantity
                                                                                                            : '-' %>
                                                                                                    </div>
                                                                                                    <% if
                                                                                                        (assigned_equipment.some(a=>
                                                                                                        a.submission_type
                                                                                                        === 'wireless'
                                                                                                        &&
                                                                                                        a.equipment_name
                                                                                                        === name &&
                                                                                                        a.price !=
                                                                                                        null)) { %>
                                                                                                        <div
                                                                                                            class="col-md-6">
                                                                                                            <strong>
                                                                                                                <%= name
                                                                                                                    %>
                                                                                                                    Price:
                                                                                                            </strong>
                                                                                                            <%= equipment
                                                                                                                &&
                                                                                                                equipment.price
                                                                                                                !=null ?
                                                                                                                equipment.price
                                                                                                                : '-' %>
                                                                                                        </div>
                                                                                                        <% } %>
                                                                                                            <% }) %>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="modal-footer">
                                                                                        <button type="button"
                                                                                            class="btn btn-danger"
                                                                                            data-dismiss="modal">Close</button>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                        </div>
                                                                        <!-- Edit Wireless Modal (unchanged) -->
                                                                        <div class="modal fade"
                                                                            id="editWirelessModal<%= w.id %>"
                                                                            tabindex="-1" role="dialog"
                                                                            aria-labelledby="editWirelessModalLabel<%= w.id %>"
                                                                            aria-hidden="true">
                                                                            <div class="modal-dialog modal-lg"
                                                                                style="margin: auto; margin-top: 100px;"
                                                                                role="document">
                                                                                <form
                                                                                    action="/update-wireless/<%= w.id %>"
                                                                                    method="POST"
                                                                                    id="editWirelessForm<%= w.id %>">
                                                                                    <div class="modal-content"
                                                                                        style="background: rgba(255, 255, 255, 0.9); border-radius: 20px; padding: 40px 17px; box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); animation: slideUp 0.8s ease forwards;">
                                                                                        <div class="modal-header"
                                                                                            style="background: linear-gradient(90deg, #6c5ce7, #a29bfe); color: white; padding: 12px; border-radius: 15px; margin-bottom: 30px; font-size: 23px; font-weight: 600; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: space-between;">
                                                                                            <h5 class="modal-title"
                                                                                                id="editWirelessModalLabel<%= w.id %>"
                                                                                                style="margin: 0;"><i
                                                                                                    class="fas fa-edit"
                                                                                                    style="margin-right: 8px;"></i>Edit
                                                                                                Wireless Submission (ID:
                                                                                                <%= w.id %>)
                                                                                            </h5>
                                                                                            <button type="button"
                                                                                                class="close"
                                                                                                data-dismiss="modal"
                                                                                                aria-label="Close">
                                                                                                <span aria-hidden="true"
                                                                                                    style="color: rgb(0, 0, 0); font-weight: 900; font-size: 40px;">×</span>
                                                                                            </button>
                                                                                            <div
                                                                                                style="content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); animation: shine 2s infinite;">
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="modal-body">
                                                                                            <!-- First Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="user_pay"
                                                                                                        id="user_pay_<%= w.id %>"
                                                                                                        value="<%= w.user_pay %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="user_pay_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">User
                                                                                                        Paid</label>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="company_pay"
                                                                                                        id="company_pay_<%= w.id %>"
                                                                                                        value="<%= w.company_pay %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="company_pay_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Company
                                                                                                        Paid</label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Second Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="cat6_quantity"
                                                                                                        id="cat6_quantity_<%= w.id %>"
                                                                                                        value="<%= w.cat6_quantity %>"
                                                                                                        placeholder=""
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="cat6_quantity_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Cat
                                                                                                        6
                                                                                                        Quantity</label>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="cat6_price"
                                                                                                        id="cat6_price_<%= w.id %>"
                                                                                                        value="<%= w.cat6_price %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="cat6_price_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Cat
                                                                                                        6 Price</label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Third Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="first_package_price"
                                                                                                        id="first_package_price_<%= w.id %>"
                                                                                                        value="<%= w.first_package_price %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="first_package_price_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">First
                                                                                                        Package
                                                                                                        Price</label>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="clips_quantity"
                                                                                                        id="clips_quantity_<%= w.id %>"
                                                                                                        value="<%= w.clips_quantity %>"
                                                                                                        placeholder=""
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="clips_quantity_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Clips
                                                                                                        Quantity</label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Fourth Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="clips_price"
                                                                                                        id="clips_price_<%= w.id %>"
                                                                                                        value="<%= w.clips_price %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="clips_price_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Clips
                                                                                                        Price</label>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="number"
                                                                                                        name="raval_bold_pair"
                                                                                                        id="raval_bold_pair_<%= w.id %>"
                                                                                                        value="<%= w.raval_bold_pair %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="raval_bold_pair_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Raval
                                                                                                        Bold
                                                                                                        Pair</label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Fifth Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="raval_bold_price"
                                                                                                        id="raval_bold_price_<%= w.id %>"
                                                                                                        value="<%= w.raval_bold_price %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="raval_bold_price_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Raval
                                                                                                        Bold
                                                                                                        Price</label>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="poll_height"
                                                                                                        id="poll_height_<%= w.id %>"
                                                                                                        value="<%= w.poll_height %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="poll_height_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Poll
                                                                                                        Height</label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Sixth Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="poll_price"
                                                                                                        id="poll_price_<%= w.id %>"
                                                                                                        value="<%= w.poll_price %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="poll_price_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Poll
                                                                                                        Price</label>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="signal_strength"
                                                                                                        id="signal_strength_<%= w.id %>"
                                                                                                        value="<%= w.signal_strength ? w.signal_strength.replace('-dBi', '') : '' %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="signal_strength_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Signal
                                                                                                        Strength
                                                                                                        (dBi)</label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Seventh Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="home_tower_height"
                                                                                                        id="home_tower_height_<%= w.id %>"
                                                                                                        value="<%= w.home_tower_height %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="home_tower_height_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Home
                                                                                                        Tower
                                                                                                        Height</label>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <select
                                                                                                        name="signal_receiver"
                                                                                                        id="signal_receiver_<%= w.id %>"
                                                                                                        data-custom-input="custom-receiver-<%= w.id %>"
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                        <option value=""
                                                                                                            disabled>
                                                                                                            Select
                                                                                                            Receiver
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Light Beam-M5"
                                                                                                            <%=w.signal_receiver==='Light Beam-M5'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Light
                                                                                                            Beam-M5
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Light Beam-AC"
                                                                                                            <%=w.signal_receiver==='Light Beam-AC'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Light
                                                                                                            Beam-AC
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Power Beam-M5"
                                                                                                            <%=w.signal_receiver==='Power Beam-M5'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Power
                                                                                                            Beam-M5
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Power Beam-AC"
                                                                                                            <%=w.signal_receiver==='Power Beam-AC'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Power
                                                                                                            Beam-AC
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Nano-station"
                                                                                                            <%=w.signal_receiver==='Nano-station'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Nano-station
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Outdoor Router"
                                                                                                            <%=w.signal_receiver==='Outdoor Router'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Outdoor
                                                                                                            Router
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Other"
                                                                                                            <%=!['LightBeam-M5'
                                                                                                            , 'Light Beam-AC'
                                                                                                            , 'Power Beam-M5'
                                                                                                            , 'Power Beam-AC'
                                                                                                            , 'Nano-station'
                                                                                                            , 'Outdoor Router'
                                                                                                            ].includes(w.signal_receiver?.trim())
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Other
                                                                                                        </option>
                                                                                                    </select>
                                                                                                    <label
                                                                                                        for="signal_receiver_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Signal
                                                                                                        Receiver</label>
                                                                                                    <input type="text"
                                                                                                        id="custom-receiver-<%= w.id %>"
                                                                                                        name="signal_receiver_custom"
                                                                                                        placeholder="Enter custom receiver"
                                                                                                        value="<%= !['Light Beam-M5', 'Light Beam-AC', 'Power Beam-M5', 'Power Beam-AC', 'Nano-station', 'Outdoor Router'].includes(w.signal_receiver) ? w.signal_receiver : '' %>"
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease; display: none; margin-top: 8px;">
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Eighth Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="receiver_price"
                                                                                                        id="receiver_price_<%= w.id %>"
                                                                                                        value="<%= w.receiver_price %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="receiver_price_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Receiver
                                                                                                        Price</label>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="receiver_model"
                                                                                                        id="receiver_model_<%= w.id %>"
                                                                                                        value="<%= w.receiver_model %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="receiver_model_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Receiver
                                                                                                        Model</label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Ninth Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <select
                                                                                                        name="wifi_onu"
                                                                                                        id="wifi_onu_<%= w.id %>"
                                                                                                        data-custom-input="custom-onu-<%= w.id %>"
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                        <option value=""
                                                                                                            disabled>
                                                                                                            Select WiFi
                                                                                                            ONU</option>
                                                                                                        <option
                                                                                                            value="TP-Link"
                                                                                                            <%=w.wifi_onu==='TP-Link'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >TP-Link
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="China"
                                                                                                            <%=w.wifi_onu==='China'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >China
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Net gear"
                                                                                                            <%=w.wifi_onu==='Net gear'
                                                                                                            ? 'selected'
                                                                                                            : '' %>>Net
                                                                                                            gear
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Other"
                                                                                                            <%=!['TP-Link', 'China'
                                                                                                            , 'Net gear'
                                                                                                            ].includes(w.wifi_onu)
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Other
                                                                                                        </option>
                                                                                                    </select>
                                                                                                    <label
                                                                                                        for="wifi_onu_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">WiFi
                                                                                                        ONU</label>
                                                                                                    <input type="text"
                                                                                                        id="custom-onu-<%= w.id %>"
                                                                                                        name="wifi_onu_custom"
                                                                                                        placeholder="Enter custom ONU"
                                                                                                        value="<%= !['TP-Link', 'China', 'Net gear'].includes(w.wifi_onu) ? w.wifi_onu : '' %>"
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease; display: none; margin-top: 8px;">
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="onu_price"
                                                                                                        id="onu_price_<%= w.id %>"
                                                                                                        value="<%= w.onu_price %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="onu_price_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">ONU
                                                                                                        Price</label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Tenth Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="onu_model"
                                                                                                        id="onu_model_<%= w.id %>"
                                                                                                        value="<%= w.onu_model %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="onu_model_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">ONU
                                                                                                        Model</label>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <select
                                                                                                        name="tower_ap_device"
                                                                                                        id="tower_ap_device_<%= w.id %>"
                                                                                                        data-custom-input="custom-tower-<%= w.id %>"
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                        <option value=""
                                                                                                            disabled>
                                                                                                            Select
                                                                                                            Device
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Fibrish"
                                                                                                            <%=w.tower_ap_device==='Fibrish'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Fibrish
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Click Opticx"
                                                                                                            <%=w.tower_ap_device==='Click Opticx'
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Click
                                                                                                            Opticx
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="D-11"
                                                                                                            <%=w.tower_ap_device==='D-11'
                                                                                                            ? 'selected'
                                                                                                            : '' %>>D-11
                                                                                                        </option>
                                                                                                        <option
                                                                                                            value="Other"
                                                                                                            <%=!['Fibrish', 'Click Opticx'
                                                                                                            , 'D-11'
                                                                                                            ].includes(w.tower_ap_device)
                                                                                                            ? 'selected'
                                                                                                            : '' %>
                                                                                                            >Other
                                                                                                        </option>
                                                                                                    </select>
                                                                                                    <label
                                                                                                        for="tower_ap_device_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Tower
                                                                                                        AP
                                                                                                        Device</label>
                                                                                                    <input type="text"
                                                                                                        id="custom-tower-<%= w.id %>"
                                                                                                        name="tower_ap_device_custom"
                                                                                                        placeholder="Enter custom device"
                                                                                                        value="<%= !['Fibrish', 'Click Opticx', 'D-11'].includes(w.tower_ap_device) ? w.tower_ap_device : '' %>"
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease; display: none; margin-top: 8px;">
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Eleventh Row -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                <div
                                                                                                    style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                    <input type="text"
                                                                                                        name="wireless_field"
                                                                                                        id="wireless_field_<%= w.id %>"
                                                                                                        value="<%= w.wireless_field %>"
                                                                                                        placeholder=" "
                                                                                                        style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                    <label
                                                                                                        for="wireless_field_<%= w.id %>"
                                                                                                        style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Wireless
                                                                                                        Field</label>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- Existing Equipment Section -->
                                                                                            <div
                                                                                                style="margin-bottom: 24px;">
                                                                                                <h5
                                                                                                    style="color: #6c5ce7; margin-bottom: 20px;">
                                                                                                    Existing Equipment
                                                                                                </h5>
                                                                                                <div
                                                                                                    class="new-equipment-container">
                                                                                                    <% assigned_equipment.filter(function(a)
                                                                                                        { return
                                                                                                        a.submission_type==='wireless'
                                                                                                        &&
                                                                                                        a.submission_id===w.id;
                                                                                                        }).forEach(function(a)
                                                                                                        { %>
                                                                                                        <div
                                                                                                            style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                            <input
                                                                                                                type="hidden"
                                                                                                                name="existing_equipment_id[]"
                                                                                                                value="<%= a.id %>">
                                                                                                            <div
                                                                                                                style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                                <input
                                                                                                                    type="text"
                                                                                                                    name="existing_equipment_name[]"
                                                                                                                    id="existing_equipment_name_<%= a.id %>"
                                                                                                                    value="<%= a.equipment_name %>"
                                                                                                                    placeholder=" "
                                                                                                                    style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                                <label
                                                                                                                    for="existing_equipment_name_<%= a.id %>"
                                                                                                                    style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Equipment
                                                                                                                    Name</label>
                                                                                                            </div>
                                                                                                            <div
                                                                                                                style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                                <input
                                                                                                                    type="text"
                                                                                                                    name="existing_equipment_quantity[]"
                                                                                                                    id="existing_equipment_quantity_<%= a.id %>"
                                                                                                                    value="<%= a.quantity %>"
                                                                                                                    placeholder=" "
                                                                                                                    style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                                <label
                                                                                                                    for="existing_equipment_quantity_<%= a.id %>"
                                                                                                                    style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Quantity</label>
                                                                                                            </div>
                                                                                                            <div
                                                                                                                style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                                <select
                                                                                                                    name="existing_equipment_unit[]"
                                                                                                                    id="existing_equipment_unit_<%= a.id %>"
                                                                                                                    style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                                    <option
                                                                                                                        value=""
                                                                                                                        <%=!a.unit
                                                                                                                        ? 'selected'
                                                                                                                        : ''
                                                                                                                        %>
                                                                                                                        >None
                                                                                                                    </option>
                                                                                                                    <option
                                                                                                                        value="meter"
                                                                                                                        <%=a.unit==='meter'
                                                                                                                        ? 'selected'
                                                                                                                        : ''
                                                                                                                        %>
                                                                                                                        >Meter
                                                                                                                    </option>
                                                                                                                    <option
                                                                                                                        value="pairs"
                                                                                                                        <%=a.unit==='pairs'
                                                                                                                        ? 'selected'
                                                                                                                        : ''
                                                                                                                        %>
                                                                                                                        >Pairs
                                                                                                                    </option>
                                                                                                                    <option
                                                                                                                        value="clips"
                                                                                                                        <%=a.unit==='clips'
                                                                                                                        ? 'selected'
                                                                                                                        : ''
                                                                                                                        %>
                                                                                                                        >Clips
                                                                                                                    </option>
                                                                                                                </select>
                                                                                                                <label
                                                                                                                    for="existing_equipment_unit_<%= a.id %>"
                                                                                                                    style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Unit</label>
                                                                                                            </div>
                                                                                                            <div
                                                                                                                style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                                <input
                                                                                                                    type="text"
                                                                                                                    name="existing_equipment_price[]"
                                                                                                                    id="existing_equipment_price_<%= a.id %>"
                                                                                                                    placeholder="Price (e.g., 150.00)"
                                                                                                                    value="<%= a.price != null ? a.price : '' %>"
                                                                                                                    style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                                <label
                                                                                                                    for="existing_equipment_price_<%= a.id %>"
                                                                                                                    style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Price</label>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <% }) %>
                                                                                                </div>
                                                                                            </div>
                                                                                            <!-- New Equipment Section -->
                                                                                            <div
                                                                                                style="margin-bottom: 24px;">
                                                                                                <h5
                                                                                                    style="color: #6c5ce7; margin-bottom: 20px;">
                                                                                                    Add Equipment
                                                                                                </h5>
                                                                                                <div
                                                                                                    class="new-equipment-container">
                                                                                                    <div
                                                                                                        style="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;">
                                                                                                        <div
                                                                                                            style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                            <input
                                                                                                                type="text"
                                                                                                                name="new_equipment_name[]"
                                                                                                                id="new_equipment_name_<%= w.id %>"
                                                                                                                placeholder=""
                                                                                                                style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                            <label
                                                                                                                for="new_equipment_name_<%= w.id %>"
                                                                                                                style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Equipment
                                                                                                                Name</label>
                                                                                                        </div>
                                                                                                        <div
                                                                                                            style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                            <input
                                                                                                                type="text"
                                                                                                                name="new_equipment_quantity[]"
                                                                                                                id="new_equipment_quantity_<%= w.id %>"
                                                                                                                placeholder=""
                                                                                                                style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                            <label
                                                                                                                for="new_equipment_quantity_<%= w.id %>"
                                                                                                                style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Quantity</label>
                                                                                                        </div>
                                                                                                        <div
                                                                                                            style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                            <select
                                                                                                                name="new_equipment_unit[]"
                                                                                                                id="new_equipment_unit_<%= w.id %>"
                                                                                                                style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                                <option
                                                                                                                    value="">
                                                                                                                    None
                                                                                                                </option>
                                                                                                                <option
                                                                                                                    value="meter">
                                                                                                                    Meter
                                                                                                                </option>
                                                                                                                <option
                                                                                                                    value="pairs">
                                                                                                                    Pairs
                                                                                                                </option>
                                                                                                                <option
                                                                                                                    value="clips">
                                                                                                                    Clips
                                                                                                                </option>
                                                                                                            </select>
                                                                                                            <label
                                                                                                                for="new_equipment_unit_<%= w.id %>"
                                                                                                                style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Unit</label>
                                                                                                        </div>
                                                                                                        <div
                                                                                                            style="position: relative; margin-bottom: 30px; width: 100%; min-width: 200px; flex: 1;">
                                                                                                            <input
                                                                                                                type="text"
                                                                                                                name="new_equipment_price[]"
                                                                                                                id="new_equipment_price_<%= w.id %>"
                                                                                                                placeholder=""
                                                                                                                style="width: 100%; border: none; border-bottom: 2px solid #dfe6e9; background: transparent; padding: 16px 0 8px 0; font-size: 1rem; color: #2d3436; transition: all 0.3s ease;">
                                                                                                            <label
                                                                                                                for="new_equipment_price_<%= w.id %>"
                                                                                                                style="position: absolute; top: 12px; left: 0; font-weight: 500; color: black; pointer-events: none; transition: all 0.3s ease;">Price</label>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                             
                                                                                            </div>
                                                                                            <!-- Submit Button -->
                                                                                            <div
                                                                                                style="display: flex; flex-wrap: wrap; gap: 24px; justify-content: center;">
                                                                                                <button type="submit"
                                                                                                    style="background: linear-gradient(45deg, #6c5ce7, #a29bfe); border: none; padding: 7px; border-radius: 20px; font-weight: 600; color: white; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; width: 100%; max-width: 200px;">
                                                                                                    <i class="fas fa-save"
                                                                                                        style="margin-right: 8px;"></i>Update
                                                                                                    <div
                                                                                                        style="content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); animation: shine 0.6s infinite;">
                                                                                                    </div>
                                                                                                </button>
                                                                                                <button type="button"
                                                                                                    data-dismiss="modal"
                                                                                                    style="background-color: red; border: none; padding: 7px; border-radius: 20px; font-weight: 600; color: white; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; width: 100%; max-width: 200px;">
                                                                                                    <i class="fas fa-times"
                                                                                                        style="margin-right: 8px;"></i>Close
                                                                                                    <div
                                                                                                        style="content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); animation: shine 0.6s infinite;">
                                                                                                    </div>
                                                                                                </button>
                                                                                            </div>
                                                                                           
                                                                                            <!-- JavaScript for Select and Custom Input Handling -->
                                                                                            <script>
                                                                                                document.addEventListener('DOMContentLoaded', function () {
                                                                                                    const selects = document.querySelectorAll('select[data-custom-input]');
                                                                                                    selects.forEach(select => {
                                                                                                        const customInput = document.getElementById(select.dataset.customInput);
                                                                                                        select.addEventListener('change', function () {
                                                                                                            customInput.style.display = this.value === 'Other' ? 'block' : 'none';
                                                                                                            if (this.value !== '') {
                                                                                                                const label = this.nextElementSibling;
                                                                                                                label.style.transform = 'translateY(-20px) scale(0.85)';
                                                                                                                label.style.fontSize = '0.9rem';
                                                                                                                label.style.color = '#6c5ce7';
                                                                                                            }
                                                                                                        });
                                                                                                        // Initial check for select elements
                                                                                                        if (select.value !== '') {
                                                                                                            const label = select.nextElementSibling;
                                                                                                            label.style.transform = 'translateY(-20px) scale(0.85)';
                                                                                                            label.style.fontSize = '0.9rem';
                                                                                                            label.style.color = '#6c5ce7';
                                                                                                            if (select.value === 'Other') {
                                                                                                                customInput.style.display = 'block';
                                                                                                            }
                                                                                                        }
                                                                                                    });
                                                                                                    // Handle dynamically added equipment fields
                                                                                                    document.querySelector('.add-equipment-btn').addEventListener('click', function () {
                                                                                                        const container = document.querySelector('.new-equipment-container');
                                                                                                        const template = container.querySelector('div[style*="display: flex; flex-wrap: wrap; gap: 24px; margin-bottom: 16px;"]').cloneNode(true);
                                                                                                        const inputs = template.querySelectorAll('input, select');
                                                                                                        inputs.forEach(input => {
                                                                                                            input.id = input.id + '_' + Date.now(); // Unique ID
                                                                                                            input.name = input.name.replace(/\[\d*\]/, '[]');
                                                                                                            input.value = '';
                                                                                                            const label = input.nextElementSibling;
                                                                                                            if (label) {
                                                                                                                label.setAttribute('for', input.id);
                                                                                                                label.style.transform = '';
                                                                                                                label.style.fontSize = '';
                                                                                                                label.style.color = '';
                                                                                                            }
                                                                                                        });
                                                                                                        container.appendChild(template);
                                                                                                    });
                                                                                                });
                                                                                            </script>
                                                                                        </div>
                                                                                    </div>
                                                                                </form>
                                                                            </div>
                                                                        </div>
                                                                        <script>
                                                                            document.querySelectorAll('input, select').forEach(function (element) {
                                                                                const label = element.nextElementSibling;
                                                                                if (label && label.tagName === 'LABEL') {
                                                                                    const updateLabel = function () {
                                                                                        if (element.value || (element.tagName === 'SELECT' && element.selectedIndex > 0)) {
                                                                                            element.classList.add('active-label');
                                                                                        } else {
                                                                                            element.classList.remove('active-label');
                                                                                        }
                                                                                    };
                                                                                    updateLabel();
                                                                                    element.addEventListener('input', updateLabel);
                                                                                    element.addEventListener('change', updateLabel);
                                                                                    element.addEventListener('focus', function () { element.classList.add('active-label'); });
                                                                                    element.addEventListener('blur', updateLabel);
                                                                                }
                                                                            });
                                                                            document.querySelectorAll('select[data-custom-input]').forEach(function (select) {
                                                                                const customInput = document.getElementById(select.dataset.customInput);
                                                                                if (customInput) {
                                                                                    select.addEventListener('change', function () {
                                                                                        customInput.style.display = select.value === 'Other' ? 'block' : 'none';
                                                                                    });
                                                                                    customInput.style.display = select.value === 'Other' ? 'block' : 'none';
                                                                                }
                                                                            });
                                                                        </script>
                                                                        <% }) %>
                                                                </tbody>
                </table>
              </div>

              <div class="table-footer">
                <div class="showing-entries">
                </div>
                <div class="pagination">
                    <i class="fas fa-chevron-left"></i>
                  </a>
            
                    <i class="fas fa-chevron-right"></i>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
                                                        <div class="pagination-controls">
                                                            <button id="wireless-prev">Previous</button>
                                                            <span id="wireless-page-info"></span>
                                                            <button id="wireless-next">Next</button>
                                                        </div>
        <!-- Rest of your wireless table content... -->
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const fibreTab = document.getElementById('fibre-tab');
        const wirelessTab = document.getElementById('wireless-tab');
        const fibreSection = document.getElementById('fibre-section');
        const wirelessSection = document.getElementById('wireless-section');

        // Fiber tab click handler
        fibreTab.addEventListener('click', function() {
            fibreSection.style.display = 'block';
            wirelessSection.style.display = 'none';
            fibreTab.classList.add('active');
            wirelessTab.classList.remove('active');
        });

        // Wireless tab click handler
        wirelessTab.addEventListener('click', function() {
            fibreSection.style.display = 'none';
            wirelessSection.style.display = 'block';
            fibreTab.classList.remove('active');
            wirelessTab.classList.add('active');
        });
    });
</script>

<style>
    .btn-primary.active {
        background-color: #0056b3;
        border-color: #0056b3;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);
    }
</style>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
    </div>
    <script src="/vendors/js/vendor.bundle.base.js"></script>
    <script src="/vendors/chart.js/Chart.min.js"></script>
    <script src="/vendors/datatables.net/jquery.dataTables.js"></script>
    <script src="/vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
    <script src="/js/dataTables.select.min.js"></script>
    <script src="/js/off-canvas.js"></script>
    <script src="/js/hoverable-collapse.js"></script>
    <script src="/js/template.js"></script>
    <script src="/js/settings.js"></script>
    <script src="/js/todolist.js"></script>
    <script src="/js/dashboard.js"></script>
    <script src="/js/Chart.roundedBarCharts.js"></script>
</body>

</html>