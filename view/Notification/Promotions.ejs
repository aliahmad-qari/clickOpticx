<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Add Promotions</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="vendors/feather/feather.css">
  <link rel="stylesheet" href="vendors\ti-icons\css\themify-icons.css">
  <link rel="stylesheet" href="vendors/css/vendor.bundle.base.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <link rel="stylesheet" href="vendors/datatables.net-bs4/dataTables.bootstrap4.css">
  <link rel="stylesheet" href="vendors\ti-icons\css\themify-icons.css">
  <link rel="stylesheet" type="text/css" href="js/select.dataTables.min.css">
  <!-- Flatpickr CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<!-- Flatpickr JS -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="css/vertical-layout-light/style.css">
  <!-- endinject -->
  <link rel="shortcut icon" href="images/favicon.png" />

  <!-- Material Design Icons CSS -->
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.2.96/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');

  .promo-3d-container {
    font-family: 'Nunito', sans-serif;
    padding: 30px;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(12px);
    border-radius: 20px;
    box-shadow:
      0 10px 30px rgba(0, 0, 0, 0.3),
      inset 0 1px 1px rgba(255, 255, 255, 0.1),
      0 0 0 1px rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transform-style: preserve-3d;
    perspective: 1000px;
    margin-top: 10px;
  }

  .promo-3d-title {
    margin-bottom: 1.5rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    transform: translateZ(20px);
  }

  .promo-3d-upload-section {
    background: linear-gradient(135deg, rgba(60, 80, 180, 0.3), rgba(90, 60, 150, 0.3));
    border-radius: 18px;
    padding: 30px;
    box-shadow:
      inset 0 10px 20px rgba(0, 0, 0, 0.2),
      0 15px 40px rgba(0, 0, 0, 0.3);
    position: relative;
    overflow: hidden;
    transform-style: preserve-3d;
  }

  .promo-3d-upload-section::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg,
        rgba(255, 255, 255, 0.2) 0%,
        rgba(255, 255, 255, 0) 50%,
        rgba(255, 255, 255, 0.2) 100%);
    z-index: 0;
    border-radius: 20px;
    transform: translateZ(-10px);
  }

  .promo-3d-upload-container {
    position: relative;
    width: 100%;
    height: 400px;
    border: 2px dashed rgba(255, 255, 255, 0.5);
    border-radius: 16px;
    background: rgba(255, 255, 255, 0.1);
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    transform: translateZ(30px);
    box-shadow:
      0 8px 20px rgba(0, 0, 0, 0.2),
      inset 0 4px 10px rgba(255, 255, 255, 0.05);
  }

  .promo-3d-upload-container:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.8);
    transform: translateZ(30px) translateY(-5px);
    box-shadow:
      0 15px 35px rgba(0, 0, 0, 0.4),
      inset 0 6px 15px rgba(255, 255, 255, 0.1);
  }

  .promo-3d-label {
    display: block;
    width: 100%;
    height: 100%;
    cursor: pointer;
    position: relative;
  }

  .promo-3d-thumbnail {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 14px;
    transition: all 0.4s ease;
    box-shadow:
      0 10px 25px rgba(0, 0, 0, 0.3),
      inset 0 -5px 15px rgba(255, 255, 255, 0.1);
  }

  .promo-3d-input {
    display: none;
  }

  .promo-3d-remove-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    background: linear-gradient(145deg, #ff4444, #cc0000);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    box-shadow:
      0 5px 15px rgba(204, 0, 0, 0.4),
      0 2px 5px rgba(0, 0, 0, 0.3);
    transition: all 0.3s ease;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3;
    transform: translateZ(40px);
  }

  .promo-3d-remove-btn:hover {
    transform: translateZ(40px) scale(1.1);
    box-shadow:
      0 8px 20px rgba(204, 0, 0, 0.5),
      0 4px 10px rgba(0, 0, 0, 0.3);
  }


  .promo-3d-upload-icon {
    transform: translateZ(10px);
  }

  .promo-3d-submit-btn {
    padding: 16px 50px;
    border-radius: 14px;
    font-weight: 700;
    font-size: 1.1rem;
    background-color: #4b49ac;
    color: white;
    border: none;
    box-shadow:
      0 10px 25px rgba(37, 65, 178, 0.4),
      0 5px 10px rgba(0, 0, 0, 0.2),
      inset 0 1px 1px rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
    transform: translateZ(20px);
    text-transform: uppercase;
    letter-spacing: 1px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
  }
#valid_till {
  position: relative !important;
  z-index: 5 !important;
  background: white !important;
  pointer-events: auto !important;
}
.promo-3d-upload-section::before {
  pointer-events: none;
}


  .promo-3d-submit-btn:hover {
    transform: translateZ(20px) translateY(-3px);
    box-shadow:
      0 15px 35px rgba(37, 65, 178, 0.5),
      0 8px 15px rgba(0, 0, 0, 0.2),
      inset 0 2px 2px rgba(255, 255, 255, 0.2);
  }

  .promo-3d-submit-btn:active {
    transform: translateZ(20px) translateY(1px);
    box-shadow:
      0 5px 15px rgba(37, 65, 178, 0.4),
      0 2px 5px rgba(0, 0, 0, 0.1),
      inset 0 1px 1px rgba(255, 255, 255, 0.1);
  }

  .promo-3d-btn-text {
    transform: translateZ(10px);
  }

  .promo-3d-btn-icon {
    transform: translateZ(10px);
  }

  /* Mobile-specific adjustments */
  @media (max-width: 768px) {
    /* .promo-3d-container {
      padding: 15px;
      width: 95%;
    } */

    .promo-3d-upload-section {
      padding: 15px;
    }

    .promo-3d-upload-container {
      height: 216px;
    }

    .promo-3d-remove-btn {
      width: 32px;
      height: 32px;
      font-size: 16px;
      top: 10px;
      right: 10px;
    }

    /* .promo-3d-upload-hint {
      padding: 8px 15px;
      bottom: 15px;
    } */

    .promo-3d-submit-btn {
      padding: 5px 2px;
    }
  }
  input[type="date"] {
  position: relative;
  z-index: 10;
  background: white !important;
  color: black;
  pointer-events: auto !important;
}


  /* Tablet adjustments */
  @media (min-width: 769px) and (max-width: 1024px) {
    .promo-3d-container {
      max-width: 700px;
    }

    .promo-3d-upload-container {
      padding-bottom: 70%;
      height: 216px;
    }
  }

  /* Desktop hover effects */
  @media (hover: hover) {
    .promo-3d-upload-container:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.8);
      transform: translateZ(30px) translateY(-5px);
      box-shadow:
        0 15px 35px rgba(0, 0, 0, 0.4),
        inset 0 6px 15px rgba(255, 255, 255, 0.1);
    }

    .promo-3d-thumbnail:hover {
      transform: scale(1.02);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
    }

    .promo-3d-remove-btn:hover {
      transform: translateZ(40px) scale(1.1);
      box-shadow:
        0 8px 20px rgba(204, 0, 0, 0.5),
        0 4px 10px rgba(0, 0, 0, 0.3);
    }

    .promo-3d-submit-btn:hover {
      transform: translateZ(20px) translateY(-3px);
      box-shadow:
        0 15px 35px rgba(37, 65, 178, 0.5),
        0 8px 15px rgba(0, 0, 0, 0.2),
        inset 0 2px 2px rgba(255, 255, 255, 0.2);
    }
  }

  /* Animation for all devices */
  .promo-3d-submit-btn:active {
    transform: translateZ(20px) translateY(1px);
    box-shadow:
      0 5px 15px rgba(37, 65, 178, 0.4),
      0 2px 5px rgba(0, 0, 0, 0.1),
      inset 0 1px 1px rgba(255, 255, 255, 0.1);
  }
</style>

<body>
  <div class="container-scroller">

    <%- include ('../partials/_navbar.ejs') %>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper" style="padding-left:0% !important; ">
        <!-- partial:partials/_settings-panel.html -->
        <%- include ('../partials/SettingsDow.ejs') %>

          <!-- NavBar Start -->
          <%- include ('../partials/Sidebar.ejs') %>
            <!-- NavBar End -->


            <div class="card col-md-10 col-lg-10 mx-auto" style=" background-color: #F3F3F9;">
              <!-- sss --> <!-- sss --> <!-- sss --> <!-- sss -->
              <% if (messages.success) { %>
                <div style="display: flex; justify-content: end;">
                  <div id="pusher-message-box" style="
            display: flex;
            border-left: 8px solid #45439e;
            color: green;
            font-weight: bold;
            font-size: 16px;
            justify-content: end;
            align-items: center;
            height: 70px;
          " class="mt-3 alert alert-primary">
                    <%= messages.success %>
                  </div>
                </div>
                <% } %>
                  <script>
                    window.addEventListener('DOMContentLoaded', () => {
                      const msgBox = document.getElementById('pusher-message-box');
                      if (msgBox) {
                        setTimeout(() => {
                          msgBox.style.transition = "opacity 0.5s";
                          msgBox.style.opacity = 0;
                          setTimeout(() => msgBox.style.display = "none", 500);
                        }, 4000);
                      }
                    });
                  </script>
                  <!-- sss --> <!-- sss --> <!-- sss --> <!-- sss -->
                  <!-- hamza -->
                  <div class="promo-3d-container">
                    <div class="text-center">
                      <h4 class="promo-3d-title">Add Limited Time Offers</h4>
                    </div>

<form action="/Promotions" method="POST" enctype="multipart/form-data">
  <div class="promo-3d-upload-section">

    <!-- ✅ IMAGE UPLOAD BLOCK -->
    <div class="promo-3d-upload-container">
      <label for="image-0" class="promo-3d-label">
        <img id="preview-0" src="https://placehold.co/500x500?text=Drag+&+Drop+or+Click"
          alt="Upload Image" class="promo-3d-thumbnail">
        <input type="file" id="image-0" name="img1" class="promo-3d-input" accept="image/*"
          onchange="previewImage(event, 0)">
        <button type="button" class="promo-3d-remove-btn" onclick="removeImage(0)">X</button>
      </label>
    </div>

    <!-- ✅ VALID TILL DATE -->
    <div class="mt-4">
      <label for="valid_till" class="form-label"><strong>Valid Till:</strong></label>
      <input type="text" id="valid_till" name="valid_till" class="form-control bg-white text-dark" placeholder="Select date" required>

    </div>

    <!-- ✅ SUBMIT BUTTON -->
    <div class="text-center pt-3 d-flex justify-content-left align-items-center gap-4">
      <button type="submit" class="promo-3d-submit-btn">
        <span class="promo-3d-btn-text">Submit</span>
      </button>
    </div>

    <!-- ✅ EXISTING IMAGES WITH DELETE BUTTONS -->
    <div class="text-center pt-3 d-flex justify-content-left align-items-center gap-4 flex-wrap">
      <% promotionresult.forEach((item) => { %>
        <div class="position-relative" style="display: inline-block;">
          <img width="100px" height="60px" style="border-radius: 7px;" src="/uploads/<%= item.img1 %>" alt="">
          <form method="POST" action="/Promotions/delete/<%= item.id %>" style="position: absolute; top: 5px; right: 5px;" onsubmit="return confirm('Delete this image?')">
            <button type="submit" class="btn btn-sm btn-danger" style="padding: 2px 7px; border-radius: 50%;">×</button>
          </form>
        </div>
      <% }) %>
    </div>

  </div>
</form>

                  </div>


                  <!-- hamza -->

            </div>
            <!-- All User Table End -->

            <script>
              function previewImage(event, index) {
                const input = event.target;
                const preview = document.getElementById("preview-" + index);
                preview.src = "https://i.imgur.com/LL0BX9E.gif"; // Loading spinner

                const reader = new FileReader();
                reader.onload = function () {
                  preview.src = reader.result;
                };
                reader.readAsDataURL(input.files[0]);
              }

              function removeImage(index) {
                const preview = document.getElementById("preview-" + index);
                const input = document.getElementById("image-" + index);

                preview.src = "https://placehold.co/400x400?text=Select+Image";
                input.value = "";
              }
            </script>

            <!-- plugins:js -->
            <script src="vendors\js\vendor.bundle.base.js"></script>
            <!-- endinject -->
            <!-- Plugin js for this page -->
            <script src="vendors\chart.js/Chart.min.js"></script>
            <script src="vendors/datatables.net/jquery.dataTables.js"></script>
            <script src="vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
            <script src="js/dataTables.select.min.js"></script>

            <!-- End plugin js for this page -->
            <!-- inject:js -->
            <script src="js/off-canvas.js"></script>
            <script src="js/hoverable-collapse.js"></script>
            <script src="js/template.js"></script>
            <script src="js/settings.js"></script>
            <!-- endinject -->
            <!-- Custom js for this page-->
            <script src="js/dashboard.js"></script>
            <script src="js/Chart.roundedBarCharts.js"></script>
            <!-- End custom js for this page-->
            <!-- Bootstrap  -->
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
           <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
           <script>
  flatpickr("#valid_till", {
    dateFormat: "Y-m-d",   // e.g., 2025-07-29
    altInput: true,
    altFormat: "F j, Y",   // e.g., July 29, 2025
    allowInput: true,
    defaultDate: "today"
  });
</script>


</body>

</html>